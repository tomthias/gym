<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#1a1a1a"><!-- var(--color-bg-primary) -->
    <title>Scheda Allenamento Mattia</title>
    <link rel="manifest" href="manifest.json">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Geist:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Primary colors */
            --color-primary:#00875F;
            --color-primary-light: #08a475;
            --color-secondary: #009f6f;
            --color-secondary-light: #fc83c5;
            --color-secondary-dark: #661541;
            --color-accent: #00875F;
            --color-gold: #FFD700;

            /* Background colors */
            --color-bg-primary: #1a1a1a;
            --color-bg-secondary: #2d2d2d;
            --color-bg-card: #373737;
            --color-bg-card-alt: #1f1f1f;
            --color-bg-dark: #222;
            --color-bg-button: #333;
            --color-bg-modal: #000;
            --color-bg-overlay: rgba(0, 0, 0, 0.9);

            /* Text colors */
            --color-text-primary: #fff;
            --color-text-secondary: #ddd;
            --color-text-muted: #bbb;
            --color-text-disabled: #aaa;
            --color-text-dim: #888;
            --color-text-dark: #000;

            /* Border colors */
            --color-border: #727272;
            --color-border-light: #333;

            /* Shadow colors */
            --shadow-card: 0 4px 12px rgba(0, 0, 0, 0.3);
            --shadow-card-hover: 0 4px 12px rgba(0, 0, 0, 0.4);
            --shadow-gold: 0 0 12px rgba(255, 215, 0, 0.3);

            /* Opacity variants */
            --bg-overlay-light: rgba(255, 255, 255, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Geist', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, var(--color-bg-primary) 0%, var(--color-bg-secondary) 100%);
            color: var(--color-text-primary);
            padding: 16px;
            padding-bottom: 80px;
            min-height: 100vh;
        }

        header {
            text-align: center;
            padding: 20px 0;
            margin-bottom: 24px;
            position: relative;
        }

        .clear-cache-btn {
            position: absolute;
            top: 20px;
            right: 0;
            background: var(--color-bg-button);
            border: 1px solid var(--color-border);
            color: var(--color-text-primary);
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 12px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .clear-cache-btn:active {
            background: var(--color-bg-card);
        }

        h1 {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .subtitle {
            font-size: 14px;
            color: var(--color-text-disabled);
        }

        .workout-card {
            background: linear-gradient(135deg, var(--color-bg-card) 0%, var(--color-bg-card-alt) 100%);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 16px;
            box-shadow: var(--shadow-card);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .workout-card.active {
            border: 2px solid var(--color-primary);
        }

        .workout-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .workout-title {
            font-size: 20px;
            font-weight: 600;
        }

        .workout-day {
            background: var(--color-primary);
            color: var(--color-text-primary);
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        .workout-day.opzionale {
            background: var(--color-secondary);
        }

        .workout-info {
            font-size: 14px;
            color: var(--color-text-muted);
            margin-bottom: 8px;
        }

        .workout-progress {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 12px;
        }

        .progress-bar {
            flex: 1;
            height: 6px;
            background: var(--color-bg-button);
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--color-primary) 0%, var(--color-primary-light) 100%);
            transition: width 0.3s;
            border-radius: 3px;
        }

        .progress-text {
            font-size: 12px;
            color: var(--color-text-disabled);
        }

        /* Dettaglio allenamento */
        .workout-detail {
            display: none;
            animation: slideIn 0.3s ease-out;
        }

        .workout-detail.visible {
            display: block;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .workout-detail-header {
            position: sticky;
            top: 0;
            background: var(--color-bg-primary);
            padding: 16px;
            margin: -16px -16px 20px -16px;
            border-bottom: 1px solid var(--color-border-light);
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
        }

        .back-button {
            background: none;
            border: none;
            color: var(--color-text-primary);
            padding: 8px;
            font-size: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
        }

        .workout-detail-title {
            font-size: 18px;
            font-weight: 600;
            flex: 1;
            text-align: center;
        }

        .reset-button {
            background: none;
            border: none;
            color: var(--color-text-primary);
            padding: 8px;
            font-size: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
        }

        .section {
            background: var(--color-bg-card);
            border-radius: 16px;
            margin-bottom: 12px;
            overflow: hidden;
        }

        .section-header {
            padding: 20px;
            cursor: pointer;
            gap: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--color-bg-card);
            transition: background 0.3s;
        }

        .section-header.expanded {
            background: var(--color-secondary);
            color: var(--color-text-primary);
        }

        .section-header::after {
            content: '';
            width: 24px;
            height: 24px;
            background-image: url('data:image/svg+xml;utf8,<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.46967 9.46967C7.73594 9.2034 8.1526 9.1792 8.44621 9.39705L8.53033 9.46967L12 12.939L15.4697 9.46967C15.7359 9.2034 16.1526 9.1792 16.4462 9.39705L16.5303 9.46967C16.7966 9.73594 16.8208 10.1526 16.6029 10.4462L16.5303 10.5303L12.5303 14.5303C12.2641 14.7966 11.8474 14.8208 11.5538 14.6029L11.4697 14.5303L7.46967 10.5303C7.17678 10.2374 7.17678 9.76256 7.46967 9.46967Z" fill="%23FFFFFF"/></svg>');
            background-repeat: no-repeat;
            background-position: center;
            background-size: contain;
            transition: transform 0.3s;
        }

        .section-header.expanded::after {
            transform: rotate(180deg);
        }

        .section-title-wrapper {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .section-title {
            font-size: 18px;
            font-weight: 600;
            flex: auto;
        }

        .section-counter {
            font-size: 16px;
            color: whitesmoke;
            font-weight: 400;
        }

        .section-duration {
            font-size: 12px;
            color: var(--color-text-secondary);
            background: var(--bg-overlay-light);
            padding: 4px 8px;
            border-radius: 8px;
        }

        .section-content {
            display: none;
            padding: 0 12px 12px 12px;
        }

        .section-content.expanded {
            display: block;
            padding-top: 24px;
        }

        .exercise-item {
            background: var(--color-bg-card-alt);
            border-radius: 10px;
            padding: 12px;
            gap:6px;
            margin-bottom: 8px;
            cursor: pointer;
        }

        .exercise-item:active {
            background: var(--color-bg-card);
        }

        .exercise-header {
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }

        .checkbox {
            width: 24px;
            height: 24px;
            min-width: 24px;
            cursor: pointer;
            position: relative;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .checkbox svg {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
        }

        .checkbox .svg-unchecked {
            display: block;
        }

        .checkbox .svg-checked {
            display: none;
        }

        .checkbox.checked .svg-unchecked {
            display: none;
        }

        .checkbox.checked .svg-checked {
            display: block;
        }

        .exercise-info {
            flex: 1;
        }

        .exercise-name {
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .exercise-details {
            font-size: 13px;
            color: var(--color-text-disabled);
        }

        .info-icon {
            color: var(--color-primary);
            font-size: 20px;
        }

        /* Modale */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--color-bg-overlay);
            z-index: 1000;
            overflow-y: auto;
            animation: fadeIn 0.2s;
        }

        .modal.visible {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: var(--color-bg-card-alt);
            margin: 20px;
            border-radius: 16px;
            padding: 32px 24px;
            animation: slideUp 0.3s;
        }

        @keyframes slideUp {
            from {
                transform: translateY(50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 20px;
            font-weight: 700;
            flex: 1;
        }

        .close-button {
            background: var(--color-bg-button);
            border: none;
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .detail-section {
            margin-bottom: 20px;
        }

        .detail-label {
            font-size: 12px;
            color: var(--color-primary);
            text-transform: uppercase;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .detail-value {
            font-size: 15px;
            line-height: 1.6;
            color: var(--color-text-secondary);
        }

        .detail-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 20px;
        }

        .detail-box {
            background: var(--color-bg-card);
            padding: 12px;
            border-radius: 10px;
        }

        .detail-box-label {
            font-size: 11px;
            color: var(--color-text-disabled);
            text-transform: uppercase;
            margin-bottom: 4px;
        }

        .detail-box-value {
            font-size: 18px;
            font-weight: 600;
            color: var(--color-primary);
        }

        .warning-box {
            background: var(--color-secondary);
            color: var(--color-text-dark);
            padding: 12px;
            border-radius: 10px;
            font-size: 13px;
            font-weight: 600;
            margin-top: 16px;
        }

        .exercise-image {
            width: 100%;
            max-width: 100%;
            border-radius: 12px;
            margin-bottom: 24px;
            object-fit: cover;
        }

        .exercise-video {
            width: 100%;
            aspect-ratio: 16 / 9;
            border-radius: 12px;
            margin-bottom: 24px;
        }

        /* Home list */
        .home-view {
            display: block;
        }

        .home-view.hidden {
            display: none;
        }

        /* Calendario Settimanale */
        .calendar-widget {
            background: var(--color-bg-card);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 24px;
        }

        .calendar-title {
            font-size: 14px;
            color: var(--color-text-disabled);
            margin-bottom: 12px;
            text-transform: uppercase;
            font-weight: 600;
        }

        .calendar-days {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
        }

        .calendar-day {
            text-align: center;
            padding: 12px 4px;
            border-radius: 10px;
            background: var(--color-bg-card-alt);
            transition: all 0.2s;
        }

        .calendar-day-name {
            font-size: 10px;
            color: var(--color-text-dim);
            margin-bottom: 4px;
            text-transform: uppercase;
        }

        .calendar-day-icon {
            font-size: 20px;
            margin-bottom: 4px;
        }

        .calendar-day.workout {
            background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-light) 100%);
        }

        .calendar-day.workout.opzionale {
            background: linear-gradient(135deg, var(--color-secondary) 0%, var(--color-secondary-light) 100%);
        }

        .calendar-day.today {
            border: 2px solid var(--color-gold);
            box-shadow: var(--shadow-gold);
        }

        .calendar-day.completed::after {
            content: '✓';
            position: absolute;
            top: 4px;
            right: 4px;
            font-size: 12px;
            color: var(--color-primary);
        }

        .calendar-day {
            position: relative;
        }

        /* Timer Tabata */
        .timer-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--color-bg-modal);
            z-index: 2000;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .timer-modal.active {
            display: flex;
        }

        .timer-content {
            text-align: center;
            width: 100%;
            max-width: 500px;
            padding: 40px 20px;
        }

        .timer-phase {
            font-size: 14px;
            font-weight: 700;
            letter-spacing: 3px;
            color: var(--color-text-disabled);
            margin-bottom: 16px;
            text-transform: uppercase;
            transition: color 0.3s;
        }

        .timer-modal.active .timer-phase {
            color: var(--color-primary);
        }

        .timer-exercise {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 48px;
            color: var(--color-text-primary);
            line-height: 1.2;
        }

        .timer-circle {
            width: 100%;
            max-width: 360px;
            aspect-ratio: 1;
            margin: 0 auto 32px;
            position: relative;
        }

        .timer-circle svg {
            transform: rotate(-90deg);
            width: 100%;
            height: 100%;
        }

        .timer-circle-bg {
            fill: none;
            stroke: #2a2a2a;
            stroke-width: 12;
        }

        .timer-circle-progress {
            fill: none;
            stroke: var(--color-primary);
            stroke-width: 12;
            stroke-linecap: round;
            transition: stroke-dashoffset 0.1s linear, stroke 0.3s;
            filter: drop-shadow(0 0 8px var(--color-primary));
        }

        .timer-circle-progress.rest {
            stroke: var(--color-secondary);
            filter: drop-shadow(0 0 8px var(--color-secondary));
        }

        .timer-number {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 96px;
            font-weight: 700;
            letter-spacing: -2px;
            font-variant-numeric: tabular-nums;
        }

        .timer-rounds {
            font-size: 16px;
            font-weight: 600;
            color: var(--color-text-secondary);
            margin-bottom: 40px;
            letter-spacing: 1px;
        }

        .timer-controls {
            display: flex;
            gap: 24px;
            justify-content: center;
            align-items: center;
        }

        .timer-btn {
            background: var(--color-bg-button);
            color: var(--color-text-primary);
            border: 2px solid var(--color-border);
            width: 64px;
            height: 64px;
            border-radius: 50%;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .timer-btn:active {
            transform: scale(0.95);
        }

        .timer-btn:not(.secondary) {
            background: var(--color-primary);
            border-color: var(--color-primary);
            width: 80px;
            height: 80px;
            font-size: 18px;
            box-shadow: 0 8px 24px rgba(29, 107, 149, 0.4);
        }

        .timer-btn:not(.secondary):active {
            box-shadow: 0 4px 12px rgba(29, 107, 149, 0.3);
        }

        /* Workout Assistant */
        .workout-assistant {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--color-bg-primary);
            z-index: 2000;
            animation: fadeIn 0.3s;
        }

        .workout-assistant.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .assistant-content {
            width: 100%;
            max-width: 500px;
            padding: 40px 20px;
            text-align: center;
        }

        .assistant-header {
            text-align: right;
            margin-bottom: 30px;
        }

        .close-assistant {
            background: var(--color-bg-button);
            border: none;
            color: var(--color-text-primary);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 20px;
            cursor: pointer;
        }

        .assistant-status-tag {
            display: inline-block;
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 700;
            margin-bottom: 20px;
            background: var(--color-primary);
            color: var(--color-text-primary);
        }

        .assistant-status-tag.recovery {
            background: var(--color-secondary);
            color: var(--color-text-dark);
        }

        .assistant-exercise-name {
            font-size: 42px;
            font-weight: 700;
            color: var(--color-text-primary);
            margin-bottom: 30px;
            line-height: 1.2;
        }

        .assistant-sets-info {
            margin-bottom: 50px;
        }

        .sets-to-do {
            font-size: 24px;
            font-weight: 600;
            color: var(--color-text-secondary);
            margin-bottom: 10px;
        }

        .sets-progress {
            font-size: 48px;
            font-weight: 700;
            color: var(--color-primary);
        }

        .assistant-stopwatch {
            margin-bottom: 30px;
        }

        .assistant-stopwatch.hidden {
            display: none;
        }

        .stopwatch-label {
            font-size: 16px;
            color: var(--color-text-muted);
            margin-bottom: 10px;
        }

        .stopwatch-display {
            font-size: 72px;
            font-weight: 700;
            color: var(--color-text-primary);
        }

        .assistant-timer {
            display: none;
            margin-bottom: 30px;
        }

        .assistant-timer.active {
            display: block;
        }

        .timer-label {
            font-size: 16px;
            color: var(--color-text-muted);
            margin-bottom: 10px;
        }

        .timer-display {
            font-size: 72px;
            font-weight: 700;
            color: var(--color-secondary);
        }

        .assistant-instructions {
            background: var(--color-bg-card);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
            text-align: left;
        }

        .assistant-instructions.hidden {
            display: none;
        }

        .instructions-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--color-primary);
            margin-bottom: 12px;
            width: 100%;
        }

        .instructions-text {
            font-size: 15px;
            line-height: 1.6;
            color: var(--color-text-secondary);
        }

        .assistant-controls {
            margin-top: 30px;
        }

        .assistant-btn {
            background: var(--color-primary);
            color: var(--color-text-primary);
            border: none;
            padding: 20px 60px;
            border-radius: 16px;
            font-size: 24px;
            font-weight: 700;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .assistant-btn:active {
            transform: scale(0.95);
        }

        /* Recovery Timer Toast */
        .recovery-toast {
            display: none;
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--color-secondary);
            color: var(--color-text-dark);
            padding: 16px 24px;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 700;
            z-index: 1500;
            box-shadow: var(--shadow-card-hover);
            min-width: 200px;
            text-align: center;
        }

        .recovery-toast.active {
            display: block;
            animation: slideUpBounce 0.3s ease-out;
        }

        @keyframes slideUpBounce {
            0% {
                transform: translateX(-50%) translateY(20px);
                opacity: 0;
            }
            100% {
                transform: translateX(-50%) translateY(0);
                opacity: 1;
            }
        }

        /* Load Input */
        .load-input {
            background: var(--color-bg-card);
            border: 1px solid var(--color-border);
            color: white;
            padding: 6px 10px;
            border-radius: 6px;
            font-size: 13px;
            width: 80px;
            margin-top: 8px;
        }

        .last-load {
            font-size: 11px;
            color: var(--color-primary);
            margin-top: 4px;
        }

        .exercise-actions {
            display: flex;
            gap: 8px;
            align-items: center;
            margin-top: 8px;
        }

        .btn-recovery {
            background: var(--color-secondary);
            color: var(--color-text-dark);
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 600;
            cursor: pointer;
        }

        .btn-start-full-workout {
            background: var(--color-primary);
            color: var(--color-text-primary);
            border: none;
            padding: 12px 24px;
            border-radius: 9999px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            margin-top: 16px;
            width: 100%;
            transition: transform 0.2s;
        }

        .btn-start-full-workout:active {
            transform: scale(0.98);
        }

        .btn-tabata {
            background: var(--color-accent);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            margin: 12px auto;
            display: block;
        }

        /* History Page */
        .history-view {
            display: none;
        }

        .history-view.visible {
            display: block;
        }

        .history-item {
            background: var(--color-bg-card);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
        }

        .history-date {
            font-size: 14px;
            color: var(--color-primary);
            font-weight: 600;
            margin-bottom: 8px;
        }

        .history-workout {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .nav-bottom {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--color-bg-primary);
            display: flex;
            justify-content: space-around;
            padding: 12px;
            border-top: 1px solid var(--color-border-light);
            z-index: 500;
        }

        .nav-btn {
            background: none;
            border: none;
            color: var(--color-text-dim);
            font-size: 24px;
            cursor: pointer;
            padding: 8px 16px;
        }

        .nav-btn.active {
            color: var(--color-primary);
        }

        /* Workout Flow States */
        .workout-flow-view {
            display: none;
        }

        .workout-flow-view.visible {
            display: block;
            animation: slideIn 0.3s ease-out;
        }

        .flow-state {
            display: block;
        }

        .flow-state.hidden {
            display: none;
        }

        .header-spacer {
            width: 32px;
        }

        /* Start State */
        .start-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 40px 0;
        }

        .start-title {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 32px;
            text-align: center;
        }

        .btn-start-workout {
            background: var(--color-primary);
            color: var(--color-text-primary);
            border: none;
            padding: 16px 40px;
            border-radius: 9999px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 40px;
            margin-bottom: 40px;
            transition: transform 0.2s;
            box-shadow: var(--shadow-card);
        }

        .btn-start-workout:active {
            transform: scale(0.92);
        }

        .btn-start-workout svg {
            width: 36px;
            height: 36px;
        }

        /* Exercise State */
        .exercise-section {
            padding: 60px 24px 32px 24px;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 16px;
        }

        .status-badge {
            background: var(--color-primary);
            color: var(--color-text-primary);
            padding: 8px 24px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 700;
            display: inline-block;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }

        .superset-badge {
            background: linear-gradient(135deg, #FF6B6B 0%, #FFD93D 50%, #6BCB77 100%);
            color: var(--color-text-dark);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 700;
            letter-spacing: 1.2px;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.85; transform: scale(1.02); }
        }

        .status-badge.rest {
            background: var(--color-secondary);
        }

        .exercise-category {
            font-size: 16px;
            font-weight: 700;
            color: #aaaaaa;
            margin: 0;
        }

        .exercise-name-large {
            font-size: 48px;
            font-weight: 700;
            margin: 0;
            line-height: 1;
        }

        .timer-display {
            font-size: 64px;
            font-weight: 700;
            text-align: center;
            margin: 0;
            font-variant-numeric: tabular-nums;
            letter-spacing: 2px;
            width: 320px;
        }

        .timer-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 24px;
        }

        .timer-btn {
            background: var(--color-primary);
            border: none;
            color: var(--color-text-primary);
            width: 56px;
            height: 56px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            transition: transform 0.2s;
        }

        .timer-btn:active {
            transform: scale(0.95);
        }

        .timer-btn svg {
            width: 24px;
            height: 24px;
        }

        .exercise-stats {
            display: flex;
            gap: 16px;
            margin-top: 24px;
            margin-bottom: 24px;
            justify-content: center;
            width: 100%;
        }

        .stat-item {
            flex: 1;
            background: #2a2a2a;
            padding: 24px;
            border-radius: 16px;
            width: 100%;
        }

        .stat-item .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }

        .stat-label {
            font-size: 24px;
            font-weight: 700;
            color: var(--color-primary);
            margin-bottom: 0;
            text-align: left;
        }

        .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: white;
            text-align: right;
        }

        .how-to-section {
            background: #2a2a2a;
            border-radius: 16px;
            margin: 0 0 24px 0;
            overflow: hidden;
            width: 100%;
        }

        .how-to-header {
            padding: 24px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .how-to-header::after {
            content: '▼';
            font-size: 12px;
            color: #aaaaaa;
            transition: transform 0.3s;
        }

        .how-to-header.expanded::after {
            transform: rotate(180deg);
        }

        .how-to-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--color-primary);
        }

        .how-to-content {
            display: none;
            padding: 0 24px 24px 24px;
            font-size: 23px;
            line-height: 24px;
            color: #cccccc;
            font-weight: 400;
        }

        .how-to-content.expanded {
            display: block;
        }

        .complete-button {
            background: var(--color-primary);
            color: var(--color-text-primary);
            border: none;
            padding: 16px;
            border-radius: 9999px;
            font-size: 16px;
            font-weight: 600;
            width: calc(100% - 32px);
            margin: 0 16px 24px 16px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .complete-button:active {
            transform: scale(0.98);
        }

        /* Exercise Actions Layout */
        .exercise-actions {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 24px;
            padding: 0 20px;
            width: 100%;
            margin-top: 8px;
            margin-bottom: 32px;
        }

        .action-btn {
            border: none;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .action-btn:active {
            transform: translateY(-2px);
        }

        .action-btn-main {
            background: var(--color-primary);
            color: var(--color-text-primary);
            width: 172px;
            height: 72px;
            border-radius: 36px;
            box-shadow: 0px 4px 12px 0px rgba(76, 175, 80, 0.3);
        }

        .action-btn-main:hover {
            background: #006748;
            box-shadow: 0px 6px 16px 0px rgba(76, 175, 80, 0.4);
        }

        .action-btn-main svg {
            width: 52px;
            height: 52px;
        }

        .action-btn-side {
            background: transparent;
            color: var(--color-text-primary);
            width: 56px;
            height: 56px;
            border-radius: 22px;
            border: 0.611px solid white;
        }

        .action-btn-side:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .action-btn-side svg {
            width: 32px;
            height: 32px;
        }

        /* Rest State */
        .rest-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 40px 20px;
            gap: 32px;
        }

        .timer-circle-container {
            width: 280px;
            height: 280px;
            position: relative;
            margin-bottom: 40px;
        }

        .timer-circle-svg {
            width: 100%;
            height: 100%;
            transform: rotate(-90deg);
        }

        .timer-circle-bg {
            fill: none;
            stroke: var(--color-bg-button);
            stroke-width: 8;
        }

        .timer-circle-progress {
            fill: none;
            stroke: var(--color-secondary);
            stroke-width: 8;
            stroke-linecap: round;
            transition: stroke-dashoffset 0.5s linear;
            filter: drop-shadow(0 0 12px var(--color-secondary));
        }

        .timer-circle-time {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 64px;
            font-weight: 700;
            font-variant-numeric: tabular-nums;
        }

        .sections-container {
            width: 100%;
        }

        /* Rest log input styles */
        .rest-log-container {
            margin-top: 8px;
            padding: 24px;
            background-color: var(--color-bg-secondary);
            border-radius: 16px;
            text-align: left;
            width: 100%;
            max-width: 420px;
        }

        .rest-title-log {
            font-size: 1.1em;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--color-primary);
            text-align: center;
        }

        .rest-input-group {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .rest-input-group label {
            font-size: 0.95em;
            color: var(--color-text-secondary);
            min-width: 110px;
            font-weight: 500;
        }

        .load-input {
            width: 130px;
            padding: 12px 16px;
            border: 1px solid var(--color-border);
            border-radius: 10px;
            background-color: var(--color-bg-primary);
            color: var(--color-text-primary);
            text-align: right;
            font-size: 1em;
            font-weight: 600;
            -moz-appearance: textfield;
        }

        .load-input::-webkit-inner-spin-button,
        .load-input::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        .load-input:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 2px rgba(0, 135, 95, 0.2);
        }

        /* Previous data display in exercise section */
        .previous-data-display {
            margin-top: 20px;
            padding: 14px 20px;
            background-color: var(--color-bg-secondary);
            border-radius: 12px;
            font-size: 0.92em;
            color: var(--color-text-muted);
            text-align: center;
        }

        .previous-data-display.hidden {
            display: none;
        }

        .previous-data-display strong {
            color: var(--color-primary);
            font-weight: 600;
        }

        svg.hidden {
            display: none;
        }
    </style>
</head>
<body>
    <!-- Vista Home -->
    <div id="homeView" class="home-view">
        <header>
            <h1>Scheda Allenamento</h1>
            <button class="clear-cache-btn" onclick="clearCache()">🗑️ Reset Cache</button>
        </header>

        <div class="workout-card">
            <div>
                <div class="workout-header">
                    <div class="workout-title">Allenamento 1</div>
                </div>
                <div class="workout-info">Upper Body Push + Fisio 1</div>
                <div class="workout-info">75-85 minuti</div>
                <div class="workout-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressA" style="width: 0%"></div>
                    </div>
                    <div class="progress-text" id="progressTextA">0/24</div>
                </div>
            </div>
            <button class="btn-start-full-workout" onclick="startFullWorkout('workoutA')">Avvia Allenamento</button>
        </div>

        <div class="workout-card">
            <div>
                <div class="workout-header">
                    <div class="workout-title"> Allenamento 2</div>
                </div>
                <div class="workout-info">Upper Body Pull + Fisio 2</div>
                <div class="workout-info">70-80 minuti</div>
                <div class="workout-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressB" style="width: 0%"></div>
                    </div>
                    <div class="progress-text" id="progressTextB">0/22</div>
                </div>
            </div>
            <button class="btn-start-full-workout" onclick="startFullWorkout('workoutB')">Avvia Allenamento</button>
        </div>

        <div class="workout-card">
            <div>
                <div class="workout-header">
                    <div class="workout-title">Allenamento 3</div>
                </div>
                <div class="workout-info">Total Body Leggero</div>
                <div class="workout-info">45-50 minuti</div>
                <div class="workout-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressC" style="width: 0%"></div>
                    </div>
                    <div class="progress-text" id="progressTextC">0/12</div>
                </div>
            </div>
            <button class="btn-start-full-workout" onclick="startFullWorkout('workoutC')">Avvia Allenamento</button>
        </div>
    </div>

    <!-- Workout Flow View -->
    <div id="workoutFlowView" class="workout-flow-view">
        <div class="workout-detail-header">
            <button class="back-button" onclick="exitWorkoutFlow()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M19 11.25C19.4142 11.25 19.75 11.5858 19.75 12C19.75 12.3797 19.4678 12.6935 19.1018 12.7432L19 12.75H5C4.58579 12.75 4.25 12.4142 4.25 12C4.25 11.6203 4.53215 11.3065 4.89823 11.2568L5 11.25H19Z" fill="#FFFFFF"/>
                    <path d="M9.46967 6.46967C9.76256 6.17678 10.2374 6.17678 10.5303 6.46967C10.7966 6.73594 10.8208 7.1526 10.6029 7.44621L10.5303 7.53033L5.53033 12.5303C5.23744 12.8232 4.76256 12.8232 4.46967 12.5303C4.2034 12.2641 4.1792 11.8474 4.39705 11.5538L4.46967 11.4697L9.46967 6.46967Z" fill="#FFFFFF"/>
                    <path d="M4.46967 11.4697C4.73594 11.2034 5.1526 11.1792 5.44621 11.3971L5.53033 11.4697L10.5303 16.4697C10.8232 16.7626 10.8232 17.2374 10.5303 17.5303C10.2641 17.7966 9.8474 17.8208 9.55379 17.6029L9.46967 17.5303L4.46967 12.5303C4.17678 12.2374 4.17678 11.7626 4.46967 11.4697Z" fill="#FFFFFF"/>
                </svg>
            </button>
            <div class="workout-detail-title" id="flowWorkoutTitle">Allenamento 1</div>
            <div class="header-spacer"></div>
        </div>

        <!-- State 1: Start -->
        <div id="flowStateStart" class="flow-state">
            <div class="start-section">
                <button class="btn-start-workout" onclick="beginFirstExercise()">
                    <svg width="38" height="41" viewBox="0 0 38 41" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M0.500488 23.4998C0.500488 13.8349 8.33541 6 18.0002 6C27.665 6 35.5 13.8349 35.5 23.4998C35.5 33.1646 27.665 40.9996 18.0002 40.9996C8.33541 40.9996 0.500488 33.1646 0.500488 23.4998ZM32.5 23.4998C32.5 15.4917 26.0082 8.99996 18.0002 8.99996C9.99223 8.99996 3.50045 15.4917 3.50045 23.4998C3.50045 31.5078 9.99223 37.9996 18.0002 37.9996C26.0082 37.9996 32.5 31.5078 32.5 23.4998Z" fill="white"/>
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M12.9741 19.7318C12.9736 18.2236 14.1958 17.0006 15.7041 17L15.9965 17.0156C16.3833 17.0572 16.7581 17.181 17.0951 17.3802L23.4647 21.1476C24.7627 21.915 25.1929 23.5894 24.4255 24.8874C24.1913 25.2836 23.8607 25.614 23.4649 25.8482L17.0949 29.6156C15.7967 30.3832 14.1219 29.953 13.3543 28.6548C13.1053 28.2336 12.9741 27.7536 12.9741 27.2644V19.7318ZM21.5447 23.4974L15.9727 20.2016V26.7914L21.5447 23.4974Z" fill="white"/>
                        <path d="M22.0004 0C22.8288 0 23.5004 0.67156 23.5004 1.49998C23.5004 2.25936 22.936 2.88694 22.2038 2.98626L22.0004 2.99996H14.0005C13.172 2.99996 12.5005 2.3284 12.5005 1.49998C12.5005 0.7406 13.0648 0.11302 13.7969 0.0137L14.0005 0H22.0004Z" fill="white"/>
                        <path d="M30.9393 6.56031C29.5739 5.19489 31.5043 3.17029 32.9119 4.30517L33.0605 4.43903L37.0605 8.43897C37.6463 9.02475 37.6463 9.97449 37.0605 10.5603C36.5281 11.0928 35.6947 11.1412 35.1075 10.7055L34.9393 10.5603L33.9999 9.62161L30.3747 13.2462C29.8421 13.7788 29.0087 13.8272 28.4215 13.3915L28.2533 13.2462C27.7207 12.7137 27.6723 11.8804 28.1081 11.2932L28.2533 11.1249L31.8779 7.49965L30.9393 6.56031Z" fill="white"/>
                        </svg>                        
            </div>

            <div class="sections-container" id="flowStartSections">
                <!-- Sections will be inserted here by JavaScript -->
            </div>
        </div>

        <!-- State 2: Exercise -->
        <div id="flowStateExercise" class="flow-state hidden">
            <div class="exercise-section">
                <div class="status-badge">IN PROGRESS</div>
                <div id="flowSupersetBadge" class="superset-badge hidden">⚡ SUPERSET</div>
                <div class="exercise-category" id="flowExerciseCategory">Riscaldamento</div>
                <h2 class="exercise-name-large" id="flowExerciseName">Bike</h2>
                <div class="timer-display" id="flowTimer">00:00</div>
                <div id="flowPreviousData" class="previous-data-display"></div>
            </div>

            <div class="exercise-actions">
                <button class="action-btn action-btn-side" id="flowTimerPlayPause" onclick="toggleExerciseTimer()" aria-label="Pause">
                    <svg id="flowTimerPauseIcon" width="32" height="33" viewBox="0 0 32 33" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M3.6665 18.6945C3.6665 12.2512 8.88985 7.02783 15.3332 7.02783C21.7765 7.02783 26.9998 12.2512 26.9998 18.6945C26.9998 25.1378 21.7765 30.3612 15.3332 30.3612C8.88985 30.3612 3.6665 25.1378 3.6665 18.6945ZM24.9998 18.6945C24.9998 13.3558 20.672 9.02783 15.3332 9.02783C9.99442 9.02783 5.6665 13.3558 5.6665 18.6945C5.6665 24.0333 9.99442 28.3612 15.3332 28.3612C20.672 28.3612 24.9998 24.0333 24.9998 18.6945Z" fill="white"/>
                        <path d="M17.9998 3.02783C18.5521 3.02783 18.9998 3.47555 18.9998 4.02783C18.9998 4.5341 18.6236 4.95249 18.1356 5.0187L17.9998 5.02783H12.6665C12.1142 5.02783 11.6665 4.58011 11.6665 4.02783C11.6665 3.52157 12.0427 3.10318 12.5308 3.03697L12.6665 3.02783H17.9998Z" fill="white"/>
                        <path d="M23.9594 7.4014C23.049 6.49111 24.3361 5.14135 25.2745 5.89795L25.3735 5.98719L28.0402 8.65386C28.4307 9.04438 28.4307 9.67755 28.0402 10.0681C27.6853 10.4231 27.1297 10.4554 26.7382 10.1649L26.6261 10.0681L23.9594 7.4014Z" fill="white"/>
                        <path d="M17.7036 15.0278C18.2099 15.0278 18.6283 15.4041 18.6945 15.8921L18.7036 16.0278V21.3612C18.7036 21.9134 18.2559 22.3612 17.7036 22.3612C17.1973 22.3612 16.7789 21.9849 16.7127 21.4969L16.7036 21.3612V16.0278C16.7036 15.4756 17.1513 15.0278 17.7036 15.0278Z" fill="white"/>
                        <path d="M12.9629 15.0278C13.4691 15.0278 13.8875 15.4041 13.9538 15.8921L13.9629 16.0278V21.3612C13.9629 21.9134 13.5151 22.3612 12.9629 22.3612C12.4566 22.3612 12.0382 21.9849 11.972 21.4969L11.9629 21.3612V16.0278C11.9629 15.4756 12.4106 15.0278 12.9629 15.0278Z" fill="white"/>
                        <path d="M25.2933 7.32072C25.6838 6.9302 26.3169 6.9302 26.7074 7.32072C27.0625 7.67575 27.0948 8.2313 26.8044 8.62278L26.7074 8.73494L23.5874 11.8549C23.1969 12.2455 22.5638 12.2455 22.1733 11.8549C21.8182 11.4999 21.786 10.9444 22.0765 10.5529L22.1733 10.4407L25.2933 7.32072Z" fill="white"/>
                    </svg>
                    <svg id="flowTimerPlayIcon" class="hidden" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10 8L24 16L10 24V8Z" fill="white"/>
                    </svg>
                </button>

                <button class="action-btn action-btn-main" onclick="completeCurrentExercise()" aria-label="Complete">
                    <svg viewBox="0 0 52 52" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="26" cy="26" r="24" stroke="white" stroke-width="3"/>
                        <path d="M16 26L23 33L36 20" stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>

                <button class="action-btn action-btn-side" onclick="resetExerciseTimer()" aria-label="Reset">
                    <svg width="30" height="33" viewBox="0 0 30 33" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M3.4375 18.6945C3.4375 12.2512 8.33439 7.02783 14.375 7.02783C20.4156 7.02783 25.3125 12.2512 25.3125 18.6945C25.3125 25.1378 20.4156 30.3612 14.375 30.3612C8.33439 30.3612 3.4375 25.1378 3.4375 18.6945ZM23.4375 18.6945C23.4375 13.3558 19.3801 9.02783 14.375 9.02783C9.36993 9.02783 5.3125 13.3558 5.3125 18.6945C5.3125 24.0333 9.36993 28.3612 14.375 28.3612C19.3801 28.3612 23.4375 24.0333 23.4375 18.6945Z" fill="white"/>
                        <path d="M16.875 3.02783C17.3927 3.02783 17.8125 3.47555 17.8125 4.02783C17.8125 4.5341 17.4598 4.95249 17.0022 5.0187L16.875 5.02783H11.875C11.3572 5.02783 10.9375 4.58011 10.9375 4.02783C10.9375 3.52157 11.2902 3.10318 11.7478 3.03697L11.875 3.02783H16.875Z" fill="white"/>
                        <path d="M22.4619 7.4014C21.6084 6.49111 22.8151 5.14135 23.6948 5.89795L23.7877 5.98719L26.2877 8.65386C26.6538 9.04438 26.6538 9.67755 26.2877 10.0681C25.9549 10.4231 25.4341 10.4554 25.0671 10.1649L24.9619 10.0681L22.4619 7.4014Z" fill="white"/>
                        <path d="M13.7196 18.8357C14.0241 18.5109 14.5178 18.5109 14.8223 18.8357C15.0991 19.1309 15.1242 19.593 14.8978 19.9186L14.8223 20.0119L14.0744 20.8099L14.8223 21.608C15.0991 21.9032 15.1242 22.3653 14.8978 22.6909L14.8223 22.7842C14.5455 23.0794 14.1123 23.1063 13.807 22.8647L13.7196 22.7842L12.4201 21.398C12.1433 21.1027 12.1181 20.6407 12.3446 20.3151L12.4201 20.2218L13.7196 18.8357Z" fill="white"/>
                        <path d="M13.6616 14.7008L13.959 14.7108C16.7726 14.7108 19.1571 16.1488 19.1571 18.207C19.1571 20.2653 16.7727 21.7032 13.9563 21.7032C13.5955 21.7018 13.2352 21.6758 12.8776 21.6253C12.4507 21.565 12.1505 21.1469 12.207 20.6916C12.2635 20.2362 12.6555 19.916 13.0823 19.9763C13.3739 20.0175 13.6677 20.0387 13.959 20.0398C16.0258 20.0398 17.5977 19.0919 17.5977 18.207C17.5977 17.355 16.14 16.4444 14.1476 16.3769L13.9154 16.3729C12.6938 16.2999 11.4943 16.7416 10.5751 17.6029C10.2516 17.9061 9.7589 17.8721 9.4747 17.527C9.1905 17.1819 9.22237 16.6564 9.54589 16.3533C10.6956 15.2759 12.1742 14.6906 13.6616 14.7008Z" fill="white"/>
                        <path d="M23.7123 7.32072C24.0784 6.9302 24.6719 6.9302 25.0381 7.32072C25.3709 7.67575 25.4012 8.2313 25.1289 8.62278L25.0381 8.73494L22.1131 11.8549C21.7469 12.2455 21.1534 12.2455 20.7873 11.8549C20.4544 11.4999 20.4242 10.9444 20.6966 10.5529L20.7873 10.4407L23.7123 7.32072Z" fill="white"/>
                    </svg>
                </button>
            </div>

            <div class="exercise-stats">
                <div class="stat-item">
                    <div class="stat-header">
                        <div class="stat-label">Serie</div>
                        <div class="stat-value" id="flowSeriesInfo">2/3</div>
                    </div>
                </div>
                <div class="stat-item">
                    <div class="stat-header">
                        <div class="stat-label">Reps</div>
                        <div class="stat-value" id="flowRepsInfo">12</div>
                    </div>
                </div>
            </div>

            <div class="how-to-section">
                <div class="how-to-header" onclick="toggleHowTo()">
                    <div class="how-to-title">Come eseguire</div>
                </div>
                <div class="how-to-content" id="flowHowToContent">
                    <p id="flowExerciseInstructions">Pedalare sulla cyclette a intensità moderata...</p>
                </div>
            </div>

            <div class="sections-container" id="flowExerciseSections">
                <!-- Sections will be inserted here by JavaScript -->
            </div>
        </div>

        <!-- State 3: Rest -->
        <div id="flowStateRest" class="flow-state hidden">
            <div class="rest-section">
                <div class="status-badge rest">RIPOSA</div>

                <div class="timer-circle-container">
                    <svg class="timer-circle-svg" viewBox="0 0 280 280">
                        <circle class="timer-circle-bg" cx="140" cy="140" r="136"/>
                        <circle id="flowRestCircle" class="timer-circle-progress" cx="140" cy="140" r="136"/>
                    </svg>
                    <div class="timer-circle-time" id="flowRestTimer">01:30</div>
                </div>

                <div class="timer-controls">
                    <button class="timer-btn" id="flowRestPlayPause" onclick="toggleRestTimer()">
                        <svg id="flowRestPauseIcon" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"/>
                        </svg>
                        <svg id="flowRestPlayIcon" class="hidden" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M8 5v14l11-7z"/>
                        </svg>
                    </button>
                    <button class="timer-btn" onclick="logAndMoveToNextSet()">
                        <svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/>
                        </svg>
                    </button>
                </div>

                <div id="rest-log-inputs" class="rest-log-container">
                    <h3 class="rest-title-log">📝 Registra la serie completata</h3>
                    <div class="rest-input-group">
                        <label for="load-during-rest">Carico (Kg):</label>
                        <input type="number" id="load-during-rest" placeholder="Peso" min="0" step="0.5" value="" class="load-input">
                    </div>
                    <div class="rest-input-group">
                        <label for="rpe-during-rest">RPE (1-10):</label>
                        <input type="number" id="rpe-during-rest" placeholder="Sforzo" min="1" max="10" step="0.5" value="" class="load-input">
                    </div>
                </div>
            </div>

            <div class="sections-container" id="flowRestSections">
                <!-- Sections will be inserted here by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Dettaglio Allenamento A -->
    <div id="workoutA" class="workout-detail">
        <div class="workout-detail-header">
            <button class="back-button" onclick="closeWorkout()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M19 11.25C19.4142 11.25 19.75 11.5858 19.75 12C19.75 12.3797 19.4678 12.6935 19.1018 12.7432L19 12.75H5C4.58579 12.75 4.25 12.4142 4.25 12C4.25 11.6203 4.53215 11.3065 4.89823 11.2568L5 11.25H19Z" fill="#FFFFFF"/>
                    <path d="M9.46967 6.46967C9.76256 6.17678 10.2374 6.17678 10.5303 6.46967C10.7966 6.73594 10.8208 7.1526 10.6029 7.44621L10.5303 7.53033L5.53033 12.5303C5.23744 12.8232 4.76256 12.8232 4.46967 12.5303C4.2034 12.2641 4.1792 11.8474 4.39705 11.5538L4.46967 11.4697L9.46967 6.46967Z" fill="#FFFFFF"/>
                    <path d="M4.46967 11.4697C4.73594 11.2034 5.1526 11.1792 5.44621 11.3971L5.53033 11.4697L10.5303 16.4697C10.8232 16.7626 10.8232 17.2374 10.5303 17.5303C10.2641 17.7966 9.8474 17.8208 9.55379 17.6029L9.46967 17.5303L4.46967 12.5303C4.17678 12.2374 4.17678 11.7626 4.46967 11.4697Z" fill="#FFFFFF"/>
                </svg>
            </button>
            <div class="workout-detail-title">Allenamento 1</div>
            <button class="reset-button" onclick="resetWorkout('workoutA')">⟳</button>
        </div>

        <!-- Riscaldamento -->
        <div class="section">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title-wrapper">
                    <div class="section-title">Riscaldamento</div>
                    <div class="section-counter">(0/3)</div>
                </div>
            </div>
            <div class="section-content">
                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('a-warm1')">
                    <div class="exercise-header">
                        <div class="checkbox" id="a-warm1"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">
                                 Bike/Tapirulan</div>
                            <div class="exercise-details">12 minuti</div>
                        </div>
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M2.25 12C2.25 6.61522 6.61522 2.25 12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12ZM20.25 12C20.25 7.44365 16.5563 3.75 12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12Z" fill="currentColor"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="currentColor"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="currentColor"/>
                            <path d="M11.85 7.24707C12.0916 7.24707 12.3066 7.36133 12.4437 7.53877L12.489 7.60681L12.5583 7.65334C12.7104 7.77091 12.8161 7.94562 12.8432 8.1453L12.85 8.24707C12.85 8.79935 12.4023 9.24707 11.85 9.24707C11.2977 9.24707 10.85 8.79935 10.85 8.24707C10.85 7.69479 11.2977 7.24707 11.85 7.24707Z" fill="currentColor"/>
                            <path d="M11.85 7.24707C12.4023 7.24707 12.85 7.69479 12.85 8.24707C12.85 8.66128 12.5142 8.99707 12.1 8.99707C11.8584 8.99707 11.6434 8.88281 11.5063 8.70537L11.46 8.63581L11.3917 8.5908C11.2396 8.47323 11.1339 8.29852 11.1069 8.09884L11.1 7.99707C11.1 7.58286 11.4358 7.24707 11.85 7.24707Z" fill="currentColor"/>
                            </svg>
                            
                    </div>
                </div>

                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('a-warm2')">
                    <div class="exercise-header">
                        <div class="checkbox" id="a-warm2"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">Circonduzione braccia</div>
                            <div class="exercise-details">2×10 avanti e indietro</div>
                        </div>
                        <div class="info-icon" onclick="event.stopPropagation(); showExerciseDetail('circonduzione')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25ZM12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75Z" fill="white"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="white"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="white"/>
                            <path d="M11.85 7.24726C12.0916 7.24726 12.3066 7.36152 12.4437 7.53896L12.489 7.607L12.5583 7.65353C12.7104 7.7711 12.8161 7.94581 12.8432 8.14549L12.85 8.24726C12.85 8.79954 12.4023 9.24726 11.85 9.24726C11.2977 9.24726 10.85 8.79954 10.85 8.24726C10.85 7.69498 11.2977 7.24726 11.85 7.24726Z" fill="white"/>
                            <path d="M11.85 7.24726C12.4023 7.24726 12.85 7.69498 12.85 8.24726C12.85 8.66147 12.5142 8.99726 12.1 8.99726C11.8584 8.99726 11.6434 8.883 11.5063 8.70556L11.46 8.636L11.3917 8.59099C11.2396 8.47342 11.1339 8.29871 11.1068 8.09903L11.1 7.99726C11.1 7.58305 11.4358 7.24726 11.85 7.24726Z" fill="white"/>
                            </svg>
                            </div>
                    </div>
                </div>

                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('a-warm3')">
                    <div class="exercise-header">
                        <div class="checkbox" id="a-warm3"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">Mobilità spalle e polsi</div>
                            <div class="exercise-details">2 minuti</div>
                        </div>
                        <div class="info-icon" onclick="event.stopPropagation(); showExerciseDetail('mobilita')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25ZM12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75Z" fill="white"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="white"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="white"/>
                            <path d="M11.85 7.24726C12.0916 7.24726 12.3066 7.36152 12.4437 7.53896L12.489 7.607L12.5583 7.65353C12.7104 7.7711 12.8161 7.94581 12.8432 8.14549L12.85 8.24726C12.85 8.79954 12.4023 9.24726 11.85 9.24726C11.2977 9.24726 10.85 8.79954 10.85 8.24726C10.85 7.69498 11.2977 7.24726 11.85 7.24726Z" fill="white"/>
                            <path d="M11.85 7.24726C12.4023 7.24726 12.85 7.69498 12.85 8.24726C12.85 8.66147 12.5142 8.99726 12.1 8.99726C11.8584 8.99726 11.6434 8.883 11.5063 8.70556L11.46 8.636L11.3917 8.59099C11.2396 8.47342 11.1339 8.29871 11.1068 8.09903L11.1 7.99726C11.1 7.58305 11.4358 7.24726 11.85 7.24726Z" fill="white"/>
                            </svg>
                            </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Blocco Fisioterapia -->
        <div class="section">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">Gambe Fisioterapia</div>
                <div class="section-duration">25 min</div>
            </div>
            <div class="section-content">
                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('a-fisio1')">
                    <div class="exercise-header">
                        <div class="checkbox" id="a-fisio1"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">SL Heel Raises con Step</div>
                            <div class="exercise-details">3×10-15 per lato • Manubrio 8 KG</div>
                        </div>
                        <div class="info-icon" onclick="event.stopPropagation(); showExerciseDetail('heelraises')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25ZM12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75Z" fill="white"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="white"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="white"/>
                            <path d="M11.85 7.24726C12.0916 7.24726 12.3066 7.36152 12.4437 7.53896L12.489 7.607L12.5583 7.65353C12.7104 7.7711 12.8161 7.94581 12.8432 8.14549L12.85 8.24726C12.85 8.79954 12.4023 9.24726 11.85 9.24726C11.2977 9.24726 10.85 8.79954 10.85 8.24726C10.85 7.69498 11.2977 7.24726 11.85 7.24726Z" fill="white"/>
                            <path d="M11.85 7.24726C12.4023 7.24726 12.85 7.69498 12.85 8.24726C12.85 8.66147 12.5142 8.99726 12.1 8.99726C11.8584 8.99726 11.6434 8.883 11.5063 8.70556L11.46 8.636L11.3917 8.59099C11.2396 8.47342 11.1339 8.29871 11.1068 8.09903L11.1 7.99726C11.1 7.58305 11.4358 7.24726 11.85 7.24726Z" fill="white"/>
                            </svg>
                            </div>
                    </div>
                </div>

                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('a-fisio2')">
                    <div class="exercise-header">
                        <div class="checkbox" id="a-fisio2"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">SL Box Bridge</div>
                            <div class="exercise-details">3×5+10+5 per lato • Rec 1'</div>
                        </div>
                        <div class="info-icon" onclick="event.stopPropagation(); showExerciseDetail('boxbridge')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25ZM12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75Z" fill="white"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="white"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="white"/>
                            <path d="M11.85 7.24726C12.0916 7.24726 12.3066 7.36152 12.4437 7.53896L12.489 7.607L12.5583 7.65353C12.7104 7.7711 12.8161 7.94581 12.8432 8.14549L12.85 8.24726C12.85 8.79954 12.4023 9.24726 11.85 9.24726C11.2977 9.24726 10.85 8.79954 10.85 8.24726C10.85 7.69498 11.2977 7.24726 11.85 7.24726Z" fill="white"/>
                            <path d="M11.85 7.24726C12.4023 7.24726 12.85 7.69498 12.85 8.24726C12.85 8.66147 12.5142 8.99726 12.1 8.99726C11.8584 8.99726 11.6434 8.883 11.5063 8.70556L11.46 8.636L11.3917 8.59099C11.2396 8.47342 11.1339 8.29871 11.1068 8.09903L11.1 7.99726C11.1 7.58305 11.4358 7.24726 11.85 7.24726Z" fill="white"/>
                            </svg>
                            </div>
                    </div>
                </div>

                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('a-fisio3')">
                    <div class="exercise-header">
                        <div class="checkbox" id="a-fisio3"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">Hip Thrust</div>
                            <div class="exercise-details">3×12 • 30 KG • SS con Side Walk</div>
                        </div>
                        <div class="info-icon" onclick="event.stopPropagation(); showExerciseDetail('hipthrust')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25ZM12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75Z" fill="white"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="white"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="white"/>
                            <path d="M11.85 7.24726C12.0916 7.24726 12.3066 7.36152 12.4437 7.53896L12.489 7.607L12.5583 7.65353C12.7104 7.7711 12.8161 7.94581 12.8432 8.14549L12.85 8.24726C12.85 8.79954 12.4023 9.24726 11.85 9.24726C11.2977 9.24726 10.85 8.79954 10.85 8.24726C10.85 7.69498 11.2977 7.24726 11.85 7.24726Z" fill="white"/>
                            <path d="M11.85 7.24726C12.4023 7.24726 12.85 7.69498 12.85 8.24726C12.85 8.66147 12.5142 8.99726 12.1 8.99726C11.8584 8.99726 11.6434 8.883 11.5063 8.70556L11.46 8.636L11.3917 8.59099C11.2396 8.47342 11.1339 8.29871 11.1068 8.09903L11.1 7.99726C11.1 7.58305 11.4358 7.24726 11.85 7.24726Z" fill="white"/>
                            </svg>
                            </div>
                    </div>
                </div>

                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('a-fisio4')">
                    <div class="exercise-header">
                        <div class="checkbox" id="a-fisio4"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">Side Walk</div>
                            <div class="exercise-details">3×6-6/4-4/2-2 • Elastico • Rec 1'</div>
                        </div>
                        <div class="info-icon" onclick="event.stopPropagation(); showExerciseDetail('sidewalk')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25ZM12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75Z" fill="white"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="white"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="white"/>
                            <path d="M11.85 7.24726C12.0916 7.24726 12.3066 7.36152 12.4437 7.53896L12.489 7.607L12.5583 7.65353C12.7104 7.7711 12.8161 7.94581 12.8432 8.14549L12.85 8.24726C12.85 8.79954 12.4023 9.24726 11.85 9.24726C11.2977 9.24726 10.85 8.79954 10.85 8.24726C10.85 7.69498 11.2977 7.24726 11.85 7.24726Z" fill="white"/>
                            <path d="M11.85 7.24726C12.4023 7.24726 12.85 7.69498 12.85 8.24726C12.85 8.66147 12.5142 8.99726 12.1 8.99726C11.8584 8.99726 11.6434 8.883 11.5063 8.70556L11.46 8.636L11.3917 8.59099C11.2396 8.47342 11.1339 8.29871 11.1068 8.09903L11.1 7.99726C11.1 7.58305 11.4358 7.24726 11.85 7.24726Z" fill="white"/>
                            </svg>
                            </div>
                    </div>
                </div>

                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('a-fisio5')">
                    <div class="exercise-header">
                        <div class="checkbox" id="a-fisio5"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">Elvis in Equilibrio su un Piede</div>
                            <div class="exercise-details">2×10 per lato • Tappetino</div>
                        </div>
                        <div class="info-icon" onclick="event.stopPropagation(); showExerciseDetail('elvis')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25ZM12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75Z" fill="white"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="white"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="white"/>
                            <path d="M11.85 7.24726C12.0916 7.24726 12.3066 7.36152 12.4437 7.53896L12.489 7.607L12.5583 7.65353C12.7104 7.7711 12.8161 7.94581 12.8432 8.14549L12.85 8.24726C12.85 8.79954 12.4023 9.24726 11.85 9.24726C11.2977 9.24726 10.85 8.79954 10.85 8.24726C10.85 7.69498 11.2977 7.24726 11.85 7.24726Z" fill="white"/>
                            <path d="M11.85 7.24726C12.4023 7.24726 12.85 7.69498 12.85 8.24726C12.85 8.66147 12.5142 8.99726 12.1 8.99726C11.8584 8.99726 11.6434 8.883 11.5063 8.70556L11.46 8.636L11.3917 8.59099C11.2396 8.47342 11.1339 8.29871 11.1068 8.09903L11.1 7.99726C11.1 7.58305 11.4358 7.24726 11.85 7.24726Z" fill="white"/>
                            </svg>
                            </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Upper Body Push -->
        <div class="section">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">Upper Body Push</div>
                <div class="section-duration">35 min</div>
            </div>
            <div class="section-content">
                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('a-push1')">
                    <div class="exercise-header">
                        <div class="checkbox" id="a-push1"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">A1 - Panca Piana Manubri</div>
                            <div class="exercise-details">4×8 • Rec 1'30"</div>
                        </div>
                        <div class="info-icon" onclick="event.stopPropagation(); showExerciseDetail('pancapiana')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25ZM12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75Z" fill="white"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="white"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="white"/>
                            <path d="M11.85 7.24726C12.0916 7.24726 12.3066 7.36152 12.4437 7.53896L12.489 7.607L12.5583 7.65353C12.7104 7.7711 12.8161 7.94581 12.8432 8.14549L12.85 8.24726C12.85 8.79954 12.4023 9.24726 11.85 9.24726C11.2977 9.24726 10.85 8.79954 10.85 8.24726C10.85 7.69498 11.2977 7.24726 11.85 7.24726Z" fill="white"/>
                            <path d="M11.85 7.24726C12.4023 7.24726 12.85 7.69498 12.85 8.24726C12.85 8.66147 12.5142 8.99726 12.1 8.99726C11.8584 8.99726 11.6434 8.883 11.5063 8.70556L11.46 8.636L11.3917 8.59099C11.2396 8.47342 11.1339 8.29871 11.1068 8.09903L11.1 7.99726C11.1 7.58305 11.4358 7.24726 11.85 7.24726Z" fill="white"/>
                            </svg>
                            </div>
                    </div>
                </div>

                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('a-push2')">
                    <div class="exercise-header">
                        <div class="checkbox" id="a-push2"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">A2 - Croci Panca Inclinata 32°</div>
                            <div class="exercise-details">3×20 iso 2" • Rec 2'</div>
                        </div>
                        <div class="info-icon" onclick="event.stopPropagation(); showExerciseDetail('croci')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25ZM12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75Z" fill="white"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="white"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="white"/>
                            <path d="M11.85 7.24726C12.0916 7.24726 12.3066 7.36152 12.4437 7.53896L12.489 7.607L12.5583 7.65353C12.7104 7.7711 12.8161 7.94581 12.8432 8.14549L12.85 8.24726C12.85 8.79954 12.4023 9.24726 11.85 9.24726C11.2977 9.24726 10.85 8.79954 10.85 8.24726C10.85 7.69498 11.2977 7.24726 11.85 7.24726Z" fill="white"/>
                            <path d="M11.85 7.24726C12.4023 7.24726 12.85 7.69498 12.85 8.24726C12.85 8.66147 12.5142 8.99726 12.1 8.99726C11.8584 8.99726 11.6434 8.883 11.5063 8.70556L11.46 8.636L11.3917 8.59099C11.2396 8.47342 11.1339 8.29871 11.1068 8.09903L11.1 7.99726C11.1 7.58305 11.4358 7.24726 11.85 7.24726Z" fill="white"/>
                            </svg>
                            </div>
                    </div>
                </div>

                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('a-push3')">
                    <div class="exercise-header">
                        <div class="checkbox" id="a-push3"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">B1 - Military Press Manubri</div>
                            <div class="exercise-details">3×10 • Rec 1'30"</div>
                        </div>
                        <div class="info-icon" onclick="event.stopPropagation(); showExerciseDetail('militarypress')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25ZM12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75Z" fill="white"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="white"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="white"/>
                            <path d="M11.85 7.24726C12.0916 7.24726 12.3066 7.36152 12.4437 7.53896L12.489 7.607L12.5583 7.65353C12.7104 7.7711 12.8161 7.94581 12.8432 8.14549L12.85 8.24726C12.85 8.79954 12.4023 9.24726 11.85 9.24726C11.2977 9.24726 10.85 8.79954 10.85 8.24726C10.85 7.69498 11.2977 7.24726 11.85 7.24726Z" fill="white"/>
                            <path d="M11.85 7.24726C12.4023 7.24726 12.85 7.69498 12.85 8.24726C12.85 8.66147 12.5142 8.99726 12.1 8.99726C11.8584 8.99726 11.6434 8.883 11.5063 8.70556L11.46 8.636L11.3917 8.59099C11.2396 8.47342 11.1339 8.29871 11.1068 8.09903L11.1 7.99726C11.1 7.58305 11.4358 7.24726 11.85 7.24726Z" fill="white"/>
                            </svg>
                            </div>
                    </div>
                </div>

                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('a-push4')">
                    <div class="exercise-header">
                        <div class="checkbox" id="a-push4"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">B2 - Alzate Laterali</div>
                            <div class="exercise-details">3×12 • Rec 1'</div>
                        </div>
                        <div class="info-icon" onclick="event.stopPropagation(); showExerciseDetail('alzatelaterali')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25ZM12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75Z" fill="white"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="white"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="white"/>
                            <path d="M11.85 7.24726C12.0916 7.24726 12.3066 7.36152 12.4437 7.53896L12.489 7.607L12.5583 7.65353C12.7104 7.7711 12.8161 7.94581 12.8432 8.14549L12.85 8.24726C12.85 8.79954 12.4023 9.24726 11.85 9.24726C11.2977 9.24726 10.85 8.79954 10.85 8.24726C10.85 7.69498 11.2977 7.24726 11.85 7.24726Z" fill="white"/>
                            <path d="M11.85 7.24726C12.4023 7.24726 12.85 7.69498 12.85 8.24726C12.85 8.66147 12.5142 8.99726 12.1 8.99726C11.8584 8.99726 11.6434 8.883 11.5063 8.70556L11.46 8.636L11.3917 8.59099C11.2396 8.47342 11.1339 8.29871 11.1068 8.09903L11.1 7.99726C11.1 7.58305 11.4358 7.24726 11.85 7.24726Z" fill="white"/>
                            </svg>
                            </div>
                    </div>
                </div>

                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('a-push5')">
                    <div class="exercise-header">
                        <div class="checkbox" id="a-push5"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">C1 - Push Down Corda</div>
                            <div class="exercise-details">3×12 • Rec 1'30"</div>
                        </div>
                        <div class="info-icon" onclick="event.stopPropagation(); showExerciseDetail('pushdown')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25ZM12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75Z" fill="white"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="white"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="white"/>
                            <path d="M11.85 7.24726C12.0916 7.24726 12.3066 7.36152 12.4437 7.53896L12.489 7.607L12.5583 7.65353C12.7104 7.7711 12.8161 7.94581 12.8432 8.14549L12.85 8.24726C12.85 8.79954 12.4023 9.24726 11.85 9.24726C11.2977 9.24726 10.85 8.79954 10.85 8.24726C10.85 7.69498 11.2977 7.24726 11.85 7.24726Z" fill="white"/>
                            <path d="M11.85 7.24726C12.4023 7.24726 12.85 7.69498 12.85 8.24726C12.85 8.66147 12.5142 8.99726 12.1 8.99726C11.8584 8.99726 11.6434 8.883 11.5063 8.70556L11.46 8.636L11.3917 8.59099C11.2396 8.47342 11.1339 8.29871 11.1068 8.09903L11.1 7.99726C11.1 7.58305 11.4358 7.24726 11.85 7.24726Z" fill="white"/>
                            </svg>
                            </div>
                    </div>
                </div>

                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('a-push6')">
                    <div class="exercise-header">
                        <div class="checkbox" id="a-push6"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">C2 - Dips tra Sedie</div>
                            <div class="exercise-details">3× max • Rec 1'30"</div>
                        </div>
                        <div class="info-icon" onclick="event.stopPropagation(); showExerciseDetail('dips')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25ZM12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75Z" fill="white"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="white"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="white"/>
                            <path d="M11.85 7.24726C12.0916 7.24726 12.3066 7.36152 12.4437 7.53896L12.489 7.607L12.5583 7.65353C12.7104 7.7711 12.8161 7.94581 12.8432 8.14549L12.85 8.24726C12.85 8.79954 12.4023 9.24726 11.85 9.24726C11.2977 9.24726 10.85 8.79954 10.85 8.24726C10.85 7.69498 11.2977 7.24726 11.85 7.24726Z" fill="white"/>
                            <path d="M11.85 7.24726C12.4023 7.24726 12.85 7.69498 12.85 8.24726C12.85 8.66147 12.5142 8.99726 12.1 8.99726C11.8584 8.99726 11.6434 8.883 11.5063 8.70556L11.46 8.636L11.3917 8.59099C11.2396 8.47342 11.1339 8.29871 11.1068 8.09903L11.1 7.99726C11.1 7.58305 11.4358 7.24726 11.85 7.24726Z" fill="white"/>
                            </svg>
                            </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Addominali Tabata -->
        <div class="section">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">Addominali Tabata</div>
                <div class="section-duration">4 min</div>
            </div>
            <div class="section-content">
                <button class="btn-tabata" onclick="startTabata()">Avvia Timer Tabata (4 min)</button>

                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('a-abs1')">
                    <div class="exercise-header">
                        <div class="checkbox" id="a-abs1"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">V-up</div>
                            <div class="exercise-details">20" lavoro / 10" riposo</div>
                        </div>
                        <div class="info-icon" onclick="event.stopPropagation(); showExerciseDetail('vup')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25ZM12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75Z" fill="white"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="white"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="white"/>
                            <path d="M11.85 7.24726C12.0916 7.24726 12.3066 7.36152 12.4437 7.53896L12.489 7.607L12.5583 7.65353C12.7104 7.7711 12.8161 7.94581 12.8432 8.14549L12.85 8.24726C12.85 8.79954 12.4023 9.24726 11.85 9.24726C11.2977 9.24726 10.85 8.79954 10.85 8.24726C10.85 7.69498 11.2977 7.24726 11.85 7.24726Z" fill="white"/>
                            <path d="M11.85 7.24726C12.4023 7.24726 12.85 7.69498 12.85 8.24726C12.85 8.66147 12.5142 8.99726 12.1 8.99726C11.8584 8.99726 11.6434 8.883 11.5063 8.70556L11.46 8.636L11.3917 8.59099C11.2396 8.47342 11.1339 8.29871 11.1068 8.09903L11.1 7.99726C11.1 7.58305 11.4358 7.24726 11.85 7.24726Z" fill="white"/>
                            </svg>
                            </div>
                    </div>
                </div>

                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('a-abs2')">
                    <div class="exercise-header">
                        <div class="checkbox" id="a-abs2"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">Crunch</div>
                            <div class="exercise-details">20" lavoro / 10" riposo</div>
                        </div>
                        <div class="info-icon" onclick="event.stopPropagation(); showExerciseDetail('crunch')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25ZM12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75Z" fill="white"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="white"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="white"/>
                            <path d="M11.85 7.24726C12.0916 7.24726 12.3066 7.36152 12.4437 7.53896L12.489 7.607L12.5583 7.65353C12.7104 7.7711 12.8161 7.94581 12.8432 8.14549L12.85 8.24726C12.85 8.79954 12.4023 9.24726 11.85 9.24726C11.2977 9.24726 10.85 8.79954 10.85 8.24726C10.85 7.69498 11.2977 7.24726 11.85 7.24726Z" fill="white"/>
                            <path d="M11.85 7.24726C12.4023 7.24726 12.85 7.69498 12.85 8.24726C12.85 8.66147 12.5142 8.99726 12.1 8.99726C11.8584 8.99726 11.6434 8.883 11.5063 8.70556L11.46 8.636L11.3917 8.59099C11.2396 8.47342 11.1339 8.29871 11.1068 8.09903L11.1 7.99726C11.1 7.58305 11.4358 7.24726 11.85 7.24726Z" fill="white"/>
                            </svg>
                            </div>
                    </div>
                </div>

                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('a-abs3')">
                    <div class="exercise-header">
                        <div class="checkbox" id="a-abs3"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">Biciclette</div>
                            <div class="exercise-details">20" lavoro / 10" riposo</div>
                        </div>
                        <div class="info-icon" onclick="event.stopPropagation(); showExerciseDetail('biciclette')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25ZM12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75Z" fill="white"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="white"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="white"/>
                            <path d="M11.85 7.24726C12.0916 7.24726 12.3066 7.36152 12.4437 7.53896L12.489 7.607L12.5583 7.65353C12.7104 7.7711 12.8161 7.94581 12.8432 8.14549L12.85 8.24726C12.85 8.79954 12.4023 9.24726 11.85 9.24726C11.2977 9.24726 10.85 8.79954 10.85 8.24726C10.85 7.69498 11.2977 7.24726 11.85 7.24726Z" fill="white"/>
                            <path d="M11.85 7.24726C12.4023 7.24726 12.85 7.69498 12.85 8.24726C12.85 8.66147 12.5142 8.99726 12.1 8.99726C11.8584 8.99726 11.6434 8.883 11.5063 8.70556L11.46 8.636L11.3917 8.59099C11.2396 8.47342 11.1339 8.29871 11.1068 8.09903L11.1 7.99726C11.1 7.58305 11.4358 7.24726 11.85 7.24726Z" fill="white"/>
                            </svg>
                            </div>
                    </div>
                </div>

                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('a-abs4')">
                    <div class="exercise-header">
                        <div class="checkbox" id="a-abs4"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">Plank</div>
                            <div class="exercise-details">20" lavoro / 10" riposo • App Tabata Timer</div>
                        </div>
                        <div class="info-icon" onclick="event.stopPropagation(); showExerciseDetail('plank')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25ZM12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75Z" fill="white"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="white"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="white"/>
                            <path d="M11.85 7.24726C12.0916 7.24726 12.3066 7.36152 12.4437 7.53896L12.489 7.607L12.5583 7.65353C12.7104 7.7711 12.8161 7.94581 12.8432 8.14549L12.85 8.24726C12.85 8.79954 12.4023 9.24726 11.85 9.24726C11.2977 9.24726 10.85 8.79954 10.85 8.24726C10.85 7.69498 11.2977 7.24726 11.85 7.24726Z" fill="white"/>
                            <path d="M11.85 7.24726C12.4023 7.24726 12.85 7.69498 12.85 8.24726C12.85 8.66147 12.5142 8.99726 12.1 8.99726C11.8584 8.99726 11.6434 8.883 11.5063 8.70556L11.46 8.636L11.3917 8.59099C11.2396 8.47342 11.1339 8.29871 11.1068 8.09903L11.1 7.99726C11.1 7.58305 11.4358 7.24726 11.85 7.24726Z" fill="white"/>
                            </svg>
                            </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Dettaglio Allenamento B -->
    <div id="workoutB" class="workout-detail">
        <button class="back-button" onclick="closeWorkout()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M19 11.25C19.4142 11.25 19.75 11.5858 19.75 12C19.75 12.3797 19.4678 12.6935 19.1018 12.7432L19 12.75H5C4.58579 12.75 4.25 12.4142 4.25 12C4.25 11.6203 4.53215 11.3065 4.89823 11.2568L5 11.25H19Z" fill="#FFFFFF"/>
                <path d="M9.46967 6.46967C9.76256 6.17678 10.2374 6.17678 10.5303 6.46967C10.7966 6.73594 10.8208 7.1526 10.6029 7.44621L10.5303 7.53033L5.53033 12.5303C5.23744 12.8232 4.76256 12.8232 4.46967 12.5303C4.2034 12.2641 4.1792 11.8474 4.39705 11.5538L4.46967 11.4697L9.46967 6.46967Z" fill="#FFFFFF"/>
                <path d="M4.46967 11.4697C4.73594 11.2034 5.1526 11.1792 5.44621 11.3971L5.53033 11.4697L10.5303 16.4697C10.8232 16.7626 10.8232 17.2374 10.5303 17.5303C10.2641 17.7966 9.8474 17.8208 9.55379 17.6029L9.46967 17.5303L4.46967 12.5303C4.17678 12.2374 4.17678 11.7626 4.46967 11.4697Z" fill="#FFFFFF"/>
            </svg>
        </button>

        <header>
            <h1>Allenamento 2</h1>
            <div class="subtitle">Upper Body Pull + Fisio 2 - Mercoledì</div>
        </header>

        <!-- Riscaldamento -->
        <div class="section">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">Riscaldamento</div>
                <div class="section-duration">8 min</div>
            </div>
            <div class="section-content">
                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('b-warm1')">
                    <div class="exercise-header">
                        <div class="checkbox" id="b-warm1"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">Bike/Tapirulan</div>
                            <div class="exercise-details">12 minuti</div>
                        </div>
                        <div class="info-icon" onclick="event.stopPropagation(); showExerciseDetail('bike')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25ZM12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75Z" fill="white"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="white"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="white"/>
                            <path d="M11.85 7.24726C12.0916 7.24726 12.3066 7.36152 12.4437 7.53896L12.489 7.607L12.5583 7.65353C12.7104 7.7711 12.8161 7.94581 12.8432 8.14549L12.85 8.24726C12.85 8.79954 12.4023 9.24726 11.85 9.24726C11.2977 9.24726 10.85 8.79954 10.85 8.24726C10.85 7.69498 11.2977 7.24726 11.85 7.24726Z" fill="white"/>
                            <path d="M11.85 7.24726C12.4023 7.24726 12.85 7.69498 12.85 8.24726C12.85 8.66147 12.5142 8.99726 12.1 8.99726C11.8584 8.99726 11.6434 8.883 11.5063 8.70556L11.46 8.636L11.3917 8.59099C11.2396 8.47342 11.1339 8.29871 11.1068 8.09903L11.1 7.99726C11.1 7.58305 11.4358 7.24726 11.85 7.24726Z" fill="white"/>
                            </svg>
                            </div>
                    </div>
                </div>

                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('b-warm2')">
                    <div class="exercise-header">
                        <div class="checkbox" id="b-warm2"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">Cat-Cow</div>
                            <div class="exercise-details">2×8</div>
                        </div>
                        <div class="info-icon" onclick="event.stopPropagation(); showExerciseDetail('catcow')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25ZM12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75Z" fill="white"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="white"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="white"/>
                            <path d="M11.85 7.24726C12.0916 7.24726 12.3066 7.36152 12.4437 7.53896L12.489 7.607L12.5583 7.65353C12.7104 7.7711 12.8161 7.94581 12.8432 8.14549L12.85 8.24726C12.85 8.79954 12.4023 9.24726 11.85 9.24726C11.2977 9.24726 10.85 8.79954 10.85 8.24726C10.85 7.69498 11.2977 7.24726 11.85 7.24726Z" fill="white"/>
                            <path d="M11.85 7.24726C12.4023 7.24726 12.85 7.69498 12.85 8.24726C12.85 8.66147 12.5142 8.99726 12.1 8.99726C11.8584 8.99726 11.6434 8.883 11.5063 8.70556L11.46 8.636L11.3917 8.59099C11.2396 8.47342 11.1339 8.29871 11.1068 8.09903L11.1 7.99726C11.1 7.58305 11.4358 7.24726 11.85 7.24726Z" fill="white"/>
                            </svg>
                            </div>
                    </div>
                </div>

                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('b-warm3')">
                    <div class="exercise-header">
                        <div class="checkbox" id="b-warm3"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">Dead Bug</div>
                            <div class="exercise-details">2×8 per lato</div>
                        </div>
                        <div class="info-icon" onclick="event.stopPropagation(); showExerciseDetail('deadbug')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25ZM12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75Z" fill="white"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="white"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="white"/>
                            <path d="M11.85 7.24726C12.0916 7.24726 12.3066 7.36152 12.4437 7.53896L12.489 7.607L12.5583 7.65353C12.7104 7.7711 12.8161 7.94581 12.8432 8.14549L12.85 8.24726C12.85 8.79954 12.4023 9.24726 11.85 9.24726C11.2977 9.24726 10.85 8.79954 10.85 8.24726C10.85 7.69498 11.2977 7.24726 11.85 7.24726Z" fill="white"/>
                            <path d="M11.85 7.24726C12.4023 7.24726 12.85 7.69498 12.85 8.24726C12.85 8.66147 12.5142 8.99726 12.1 8.99726C11.8584 8.99726 11.6434 8.883 11.5063 8.70556L11.46 8.636L11.3917 8.59099C11.2396 8.47342 11.1339 8.29871 11.1068 8.09903L11.1 7.99726C11.1 7.58305 11.4358 7.24726 11.85 7.24726Z" fill="white"/>
                            </svg>
                            </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Blocco Fisioterapia 2 -->
        <div class="section">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">Gambie Fisioterapia</div>
                <div class="section-duration">25 min</div>
            </div>
            <div class="section-content">
                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('b-fisio1')">
                    <div class="exercise-header">
                        <div class="checkbox" id="b-fisio1"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">Plank + Estensione Anca Alternata</div>
                            <div class="exercise-details">4×45" • SS con L-Sit</div>
                        </div>
                        <div class="info-icon" onclick="event.stopPropagation(); showExerciseDetail('plankestensione')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25ZM12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75Z" fill="white"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="white"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="white"/>
                            <path d="M11.85 7.24726C12.0916 7.24726 12.3066 7.36152 12.4437 7.53896L12.489 7.607L12.5583 7.65353C12.7104 7.7711 12.8161 7.94581 12.8432 8.14549L12.85 8.24726C12.85 8.79954 12.4023 9.24726 11.85 9.24726C11.2977 9.24726 10.85 8.79954 10.85 8.24726C10.85 7.69498 11.2977 7.24726 11.85 7.24726Z" fill="white"/>
                            <path d="M11.85 7.24726C12.4023 7.24726 12.85 7.69498 12.85 8.24726C12.85 8.66147 12.5142 8.99726 12.1 8.99726C11.8584 8.99726 11.6434 8.883 11.5063 8.70556L11.46 8.636L11.3917 8.59099C11.2396 8.47342 11.1339 8.29871 11.1068 8.09903L11.1 7.99726C11.1 7.58305 11.4358 7.24726 11.85 7.24726Z" fill="white"/>
                            </svg>
                            </div>
                    </div>
                </div>

                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('b-fisio2')">
                    <div class="exercise-header">
                        <div class="checkbox" id="b-fisio2"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">L-Sit</div>
                            <div class="exercise-details">4×45" • Rec 45"</div>
                        </div>
                        <div class="info-icon" onclick="event.stopPropagation(); showExerciseDetail('lsit')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25ZM12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75Z" fill="white"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="white"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="white"/>
                            <path d="M11.85 7.24726C12.0916 7.24726 12.3066 7.36152 12.4437 7.53896L12.489 7.607L12.5583 7.65353C12.7104 7.7711 12.8161 7.94581 12.8432 8.14549L12.85 8.24726C12.85 8.79954 12.4023 9.24726 11.85 9.24726C11.2977 9.24726 10.85 8.79954 10.85 8.24726C10.85 7.69498 11.2977 7.24726 11.85 7.24726Z" fill="white"/>
                            <path d="M11.85 7.24726C12.4023 7.24726 12.85 7.69498 12.85 8.24726C12.85 8.66147 12.5142 8.99726 12.1 8.99726C11.8584 8.99726 11.6434 8.883 11.5063 8.70556L11.46 8.636L11.3917 8.59099C11.2396 8.47342 11.1339 8.29871 11.1068 8.09903L11.1 7.99726C11.1 7.58305 11.4358 7.24726 11.85 7.24726Z" fill="white"/>
                            </svg>
                            </div>
                    </div>
                </div>

                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('b-fisio3')">
                    <div class="exercise-header">
                        <div class="checkbox" id="b-fisio3"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">Squat Tempo</div>
                            <div class="exercise-details">3×8 • 20 KG • SS con Wall Sit</div>
                        </div>
                        <div class="info-icon" onclick="event.stopPropagation(); showExerciseDetail('squattempo')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25ZM12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75Z" fill="white"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="white"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="white"/>
                            <path d="M11.85 7.24726C12.0916 7.24726 12.3066 7.36152 12.4437 7.53896L12.489 7.607L12.5583 7.65353C12.7104 7.7711 12.8161 7.94581 12.8432 8.14549L12.85 8.24726C12.85 8.79954 12.4023 9.24726 11.85 9.24726C11.2977 9.24726 10.85 8.79954 10.85 8.24726C10.85 7.69498 11.2977 7.24726 11.85 7.24726Z" fill="white"/>
                            <path d="M11.85 7.24726C12.4023 7.24726 12.85 7.69498 12.85 8.24726C12.85 8.66147 12.5142 8.99726 12.1 8.99726C11.8584 8.99726 11.6434 8.883 11.5063 8.70556L11.46 8.636L11.3917 8.59099C11.2396 8.47342 11.1339 8.29871 11.1068 8.09903L11.1 7.99726C11.1 7.58305 11.4358 7.24726 11.85 7.24726Z" fill="white"/>
                            </svg>
                            </div>
                    </div>
                </div>

                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('b-fisio4')">
                    <div class="exercise-header">
                        <div class="checkbox" id="b-fisio4"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">Wall Sit</div>
                            <div class="exercise-details">3×40" • Rec 2'</div>
                        </div>
                        <div class="info-icon" onclick="event.stopPropagation(); showExerciseDetail('wallsit')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25ZM12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75Z" fill="white"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="white"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="white"/>
                            <path d="M11.85 7.24726C12.0916 7.24726 12.3066 7.36152 12.4437 7.53896L12.489 7.607L12.5583 7.65353C12.7104 7.7711 12.8161 7.94581 12.8432 8.14549L12.85 8.24726C12.85 8.79954 12.4023 9.24726 11.85 9.24726C11.2977 9.24726 10.85 8.79954 10.85 8.24726C10.85 7.69498 11.2977 7.24726 11.85 7.24726Z" fill="white"/>
                            <path d="M11.85 7.24726C12.4023 7.24726 12.85 7.69498 12.85 8.24726C12.85 8.66147 12.5142 8.99726 12.1 8.99726C11.8584 8.99726 11.6434 8.883 11.5063 8.70556L11.46 8.636L11.3917 8.59099C11.2396 8.47342 11.1339 8.29871 11.1068 8.09903L11.1 7.99726C11.1 7.58305 11.4358 7.24726 11.85 7.24726Z" fill="white"/>
                            </svg>
                            </div>
                    </div>
                </div>

                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('b-fisio5')">
                    <div class="exercise-header">
                        <div class="checkbox" id="b-fisio5"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">Affondo Statico con Disco sopra la Testa</div>
                            <div class="exercise-details">3×10 per lato • Disco 5 KG • Rec 2'</div>
                        </div>
                        <div class="info-icon" onclick="event.stopPropagation(); showExerciseDetail('affondo')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25ZM12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75Z" fill="white"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="white"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="white"/>
                            <path d="M11.85 7.24726C12.0916 7.24726 12.3066 7.36152 12.4437 7.53896L12.489 7.607L12.5583 7.65353C12.7104 7.7711 12.8161 7.94581 12.8432 8.14549L12.85 8.24726C12.85 8.79954 12.4023 9.24726 11.85 9.24726C11.2977 9.24726 10.85 8.79954 10.85 8.24726C10.85 7.69498 11.2977 7.24726 11.85 7.24726Z" fill="white"/>
                            <path d="M11.85 7.24726C12.4023 7.24726 12.85 7.69498 12.85 8.24726C12.85 8.66147 12.5142 8.99726 12.1 8.99726C11.8584 8.99726 11.6434 8.883 11.5063 8.70556L11.46 8.636L11.3917 8.59099C11.2396 8.47342 11.1339 8.29871 11.1068 8.09903L11.1 7.99726C11.1 7.58305 11.4358 7.24726 11.85 7.24726Z" fill="white"/>
                            </svg>
                            </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Upper Body Pull -->
        <div class="section">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">Upper Body Pull</div>
                <div class="section-duration">30 min</div>
            </div>
            <div class="section-content">
                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('b-pull1')">
                    <div class="exercise-header">
                        <div class="checkbox" id="b-pull1"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">A1 - Trazioni</div>
                            <div class="exercise-details">4×6 • Rec 1' • (o Lat Machine 4×10)</div>
                        </div>
                        <div class="info-icon" onclick="event.stopPropagation(); showExerciseDetail('trazioni')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25ZM12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75Z" fill="white"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="white"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="white"/>
                            <path d="M11.85 7.24726C12.0916 7.24726 12.3066 7.36152 12.4437 7.53896L12.489 7.607L12.5583 7.65353C12.7104 7.7711 12.8161 7.94581 12.8432 8.14549L12.85 8.24726C12.85 8.79954 12.4023 9.24726 11.85 9.24726C11.2977 9.24726 10.85 8.79954 10.85 8.24726C10.85 7.69498 11.2977 7.24726 11.85 7.24726Z" fill="white"/>
                            <path d="M11.85 7.24726C12.4023 7.24726 12.85 7.69498 12.85 8.24726C12.85 8.66147 12.5142 8.99726 12.1 8.99726C11.8584 8.99726 11.6434 8.883 11.5063 8.70556L11.46 8.636L11.3917 8.59099C11.2396 8.47342 11.1339 8.29871 11.1068 8.09903L11.1 7.99726C11.1 7.58305 11.4358 7.24726 11.85 7.24726Z" fill="white"/>
                            </svg>
                            </div>
                    </div>
                </div>

                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('b-pull2')">
                    <div class="exercise-header">
                        <div class="checkbox" id="b-pull2"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">A2 - Pulley/Rematore Cavo</div>
                            <div class="exercise-details">3×12 • Rec 1'</div>
                        </div>
                        <div class="info-icon" onclick="event.stopPropagation(); showExerciseDetail('pulley')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25ZM12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75Z" fill="white"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="white"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="white"/>
                            <path d="M11.85 7.24726C12.0916 7.24726 12.3066 7.36152 12.4437 7.53896L12.489 7.607L12.5583 7.65353C12.7104 7.7711 12.8161 7.94581 12.8432 8.14549L12.85 8.24726C12.85 8.79954 12.4023 9.24726 11.85 9.24726C11.2977 9.24726 10.85 8.79954 10.85 8.24726C10.85 7.69498 11.2977 7.24726 11.85 7.24726Z" fill="white"/>
                            <path d="M11.85 7.24726C12.4023 7.24726 12.85 7.69498 12.85 8.24726C12.85 8.66147 12.5142 8.99726 12.1 8.99726C11.8584 8.99726 11.6434 8.883 11.5063 8.70556L11.46 8.636L11.3917 8.59099C11.2396 8.47342 11.1339 8.29871 11.1068 8.09903L11.1 7.99726C11.1 7.58305 11.4358 7.24726 11.85 7.24726Z" fill="white"/>
                            </svg>
                            </div>
                    </div>
                </div>

                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('b-pull3')">
                    <div class="exercise-header">
                        <div class="checkbox" id="b-pull3"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">B1 - Curl Panca 59° Manubri</div>
                            <div class="exercise-details">3×10 • Rec 2'</div>
                        </div>
                        <div class="info-icon" onclick="event.stopPropagation(); showExerciseDetail('curlpanca')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25ZM12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75Z" fill="white"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="white"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="white"/>
                            <path d="M11.85 7.24726C12.0916 7.24726 12.3066 7.36152 12.4437 7.53896L12.489 7.607L12.5583 7.65353C12.7104 7.7711 12.8161 7.94581 12.8432 8.14549L12.85 8.24726C12.85 8.79954 12.4023 9.24726 11.85 9.24726C11.2977 9.24726 10.85 8.79954 10.85 8.24726C10.85 7.69498 11.2977 7.24726 11.85 7.24726Z" fill="white"/>
                            <path d="M11.85 7.24726C12.4023 7.24726 12.85 7.69498 12.85 8.24726C12.85 8.66147 12.5142 8.99726 12.1 8.99726C11.8584 8.99726 11.6434 8.883 11.5063 8.70556L11.46 8.636L11.3917 8.59099C11.2396 8.47342 11.1339 8.29871 11.1068 8.09903L11.1 7.99726C11.1 7.58305 11.4358 7.24726 11.85 7.24726Z" fill="white"/>
                            </svg>
                            </div>
                    </div>
                </div>

                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('b-pull4')">
                    <div class="exercise-header">
                        <div class="checkbox" id="b-pull4"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">B2 - Hammer Curl</div>
                            <div class="exercise-details">3×10 iso 2" • Rec 2'</div>
                        </div>
                        <div class="info-icon" onclick="event.stopPropagation(); showExerciseDetail('hammercurl')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25ZM12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75Z" fill="white"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="white"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="white"/>
                            <path d="M11.85 7.24726C12.0916 7.24726 12.3066 7.36152 12.4437 7.53896L12.489 7.607L12.5583 7.65353C12.7104 7.7711 12.8161 7.94581 12.8432 8.14549L12.85 8.24726C12.85 8.79954 12.4023 9.24726 11.85 9.24726C11.2977 9.24726 10.85 8.79954 10.85 8.24726C10.85 7.69498 11.2977 7.24726 11.85 7.24726Z" fill="white"/>
                            <path d="M11.85 7.24726C12.4023 7.24726 12.85 7.69498 12.85 8.24726C12.85 8.66147 12.5142 8.99726 12.1 8.99726C11.8584 8.99726 11.6434 8.883 11.5063 8.70556L11.46 8.636L11.3917 8.59099C11.2396 8.47342 11.1339 8.29871 11.1068 8.09903L11.1 7.99726C11.1 7.58305 11.4358 7.24726 11.85 7.24726Z" fill="white"/>
                            </svg>
                            </div>
                    </div>
                </div>

                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('b-pull5')">
                    <div class="exercise-header">
                        <div class="checkbox" id="b-pull5"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">C1 - Curl Polsi</div>
                            <div class="exercise-details">3×15 • Rec 1'</div>
                        </div>
                        <div class="info-icon" onclick="event.stopPropagation(); showExerciseDetail('curlpolsi')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25ZM12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75Z" fill="white"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="white"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="white"/>
                            <path d="M11.85 7.24726C12.0916 7.24726 12.3066 7.36152 12.4437 7.53896L12.489 7.607L12.5583 7.65353C12.7104 7.7711 12.8161 7.94581 12.8432 8.14549L12.85 8.24726C12.85 8.79954 12.4023 9.24726 11.85 9.24726C11.2977 9.24726 10.85 8.79954 10.85 8.24726C10.85 7.69498 11.2977 7.24726 11.85 7.24726Z" fill="white"/>
                            <path d="M11.85 7.24726C12.4023 7.24726 12.85 7.69498 12.85 8.24726C12.85 8.66147 12.5142 8.99726 12.1 8.99726C11.8584 8.99726 11.6434 8.883 11.5063 8.70556L11.46 8.636L11.3917 8.59099C11.2396 8.47342 11.1339 8.29871 11.1068 8.09903L11.1 7.99726C11.1 7.58305 11.4358 7.24726 11.85 7.24726Z" fill="white"/>
                            </svg>
                            </div>
                    </div>
                </div>

                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('b-pull6')">
                    <div class="exercise-header">
                        <div class="checkbox" id="b-pull6"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">C2 - Reverse Curl</div>
                            <div class="exercise-details">3×12 • Rec 1'</div>
                        </div>
                        <div class="info-icon" onclick="event.stopPropagation(); showExerciseDetail('reversecurl')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25ZM12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75Z" fill="white"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="white"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="white"/>
                            <path d="M11.85 7.24726C12.0916 7.24726 12.3066 7.36152 12.4437 7.53896L12.489 7.607L12.5583 7.65353C12.7104 7.7711 12.8161 7.94581 12.8432 8.14549L12.85 8.24726C12.85 8.79954 12.4023 9.24726 11.85 9.24726C11.2977 9.24726 10.85 8.79954 10.85 8.24726C10.85 7.69498 11.2977 7.24726 11.85 7.24726Z" fill="white"/>
                            <path d="M11.85 7.24726C12.4023 7.24726 12.85 7.69498 12.85 8.24726C12.85 8.66147 12.5142 8.99726 12.1 8.99726C11.8584 8.99726 11.6434 8.883 11.5063 8.70556L11.46 8.636L11.3917 8.59099C11.2396 8.47342 11.1339 8.29871 11.1068 8.09903L11.1 7.99726C11.1 7.58305 11.4358 7.24726 11.85 7.24726Z" fill="white"/>
                            </svg>
                            </div>
                    </div>
                </div>

                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('b-pull7')">
                    <div class="exercise-header">
                        <div class="checkbox" id="b-pull7"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">FINALE - Farmer's Walk</div>
                            <div class="exercise-details">2×30-45 metri • Rec 2'</div>
                        </div>
                        <div class="info-icon" onclick="event.stopPropagation(); showExerciseDetail('farmerswalk')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25ZM12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75Z" fill="white"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="white"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="white"/>
                            <path d="M11.85 7.24726C12.0916 7.24726 12.3066 7.36152 12.4437 7.53896L12.489 7.607L12.5583 7.65353C12.7104 7.7711 12.8161 7.94581 12.8432 8.14549L12.85 8.24726C12.85 8.79954 12.4023 9.24726 11.85 9.24726C11.2977 9.24726 10.85 8.79954 10.85 8.24726C10.85 7.69498 11.2977 7.24726 11.85 7.24726Z" fill="white"/>
                            <path d="M11.85 7.24726C12.4023 7.24726 12.85 7.69498 12.85 8.24726C12.85 8.66147 12.5142 8.99726 12.1 8.99726C11.8584 8.99726 11.6434 8.883 11.5063 8.70556L11.46 8.636L11.3917 8.59099C11.2396 8.47342 11.1339 8.29871 11.1068 8.09903L11.1 7.99726C11.1 7.58305 11.4358 7.24726 11.85 7.24726Z" fill="white"/>
                            </svg>
                            </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Addominali Avanzati -->
        <div class="section">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">Addominali Avanzati</div>
                <div class="section-duration">12 min</div>
            </div>
            <div class="section-content">
                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('b-abs1')">
                    <div class="exercise-header">
                        <div class="checkbox" id="b-abs1"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">Hollow Hold</div>
                            <div class="exercise-details">3×30" • Rec 1'</div>
                        </div>
                        <div class="info-icon" onclick="event.stopPropagation(); showExerciseDetail('hollowhold')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25ZM12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75Z" fill="white"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="white"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="white"/>
                            <path d="M11.85 7.24726C12.0916 7.24726 12.3066 7.36152 12.4437 7.53896L12.489 7.607L12.5583 7.65353C12.7104 7.7711 12.8161 7.94581 12.8432 8.14549L12.85 8.24726C12.85 8.79954 12.4023 9.24726 11.85 9.24726C11.2977 9.24726 10.85 8.79954 10.85 8.24726C10.85 7.69498 11.2977 7.24726 11.85 7.24726Z" fill="white"/>
                            <path d="M11.85 7.24726C12.4023 7.24726 12.85 7.69498 12.85 8.24726C12.85 8.66147 12.5142 8.99726 12.1 8.99726C11.8584 8.99726 11.6434 8.883 11.5063 8.70556L11.46 8.636L11.3917 8.59099C11.2396 8.47342 11.1339 8.29871 11.1068 8.09903L11.1 7.99726C11.1 7.58305 11.4358 7.24726 11.85 7.24726Z" fill="white"/>
                            </svg>
                            </div>
                    </div>
                </div>

                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('b-abs2')">
                    <div class="exercise-header">
                        <div class="checkbox" id="b-abs2"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">Reverse Crunch</div>
                            <div class="exercise-details">3×15 • Rec 1'</div>
                        </div>
                        <div class="info-icon" onclick="event.stopPropagation(); showExerciseDetail('reversecrunch')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25ZM12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75Z" fill="white"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="white"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="white"/>
                            <path d="M11.85 7.24726C12.0916 7.24726 12.3066 7.36152 12.4437 7.53896L12.489 7.607L12.5583 7.65353C12.7104 7.7711 12.8161 7.94581 12.8432 8.14549L12.85 8.24726C12.85 8.79954 12.4023 9.24726 11.85 9.24726C11.2977 9.24726 10.85 8.79954 10.85 8.24726C10.85 7.69498 11.2977 7.24726 11.85 7.24726Z" fill="white"/>
                            <path d="M11.85 7.24726C12.4023 7.24726 12.85 7.69498 12.85 8.24726C12.85 8.66147 12.5142 8.99726 12.1 8.99726C11.8584 8.99726 11.6434 8.883 11.5063 8.70556L11.46 8.636L11.3917 8.59099C11.2396 8.47342 11.1339 8.29871 11.1068 8.09903L11.1 7.99726C11.1 7.58305 11.4358 7.24726 11.85 7.24726Z" fill="white"/>
                            </svg>
                            </div>
                    </div>
                </div>

                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('b-abs3')">
                    <div class="exercise-header">
                        <div class="checkbox" id="b-abs3"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">Plank Laterale</div>
                            <div class="exercise-details">2×30" per lato • Rec 1'</div>
                        </div>
                        <div class="info-icon" onclick="event.stopPropagation(); showExerciseDetail('planklaterale')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25ZM12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75Z" fill="white"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="white"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="white"/>
                            <path d="M11.85 7.24726C12.0916 7.24726 12.3066 7.36152 12.4437 7.53896L12.489 7.607L12.5583 7.65353C12.7104 7.7711 12.8161 7.94581 12.8432 8.14549L12.85 8.24726C12.85 8.79954 12.4023 9.24726 11.85 9.24726C11.2977 9.24726 10.85 8.79954 10.85 8.24726C10.85 7.69498 11.2977 7.24726 11.85 7.24726Z" fill="white"/>
                            <path d="M11.85 7.24726C12.4023 7.24726 12.85 7.69498 12.85 8.24726C12.85 8.66147 12.5142 8.99726 12.1 8.99726C11.8584 8.99726 11.6434 8.883 11.5063 8.70556L11.46 8.636L11.3917 8.59099C11.2396 8.47342 11.1339 8.29871 11.1068 8.09903L11.1 7.99726C11.1 7.58305 11.4358 7.24726 11.85 7.24726Z" fill="white"/>
                            </svg>
                            </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Dettaglio Allenamento C -->
    <div id="workoutC" class="workout-detail">
        <button class="back-button" onclick="closeWorkout()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M19 11.25C19.4142 11.25 19.75 11.5858 19.75 12C19.75 12.3797 19.4678 12.6935 19.1018 12.7432L19 12.75H5C4.58579 12.75 4.25 12.4142 4.25 12C4.25 11.6203 4.53215 11.3065 4.89823 11.2568L5 11.25H19Z" fill="#FFFFFF"/>
                <path d="M9.46967 6.46967C9.76256 6.17678 10.2374 6.17678 10.5303 6.46967C10.7966 6.73594 10.8208 7.1526 10.6029 7.44621L10.5303 7.53033L5.53033 12.5303C5.23744 12.8232 4.76256 12.8232 4.46967 12.5303C4.2034 12.2641 4.1792 11.8474 4.39705 11.5538L4.46967 11.4697L9.46967 6.46967Z" fill="#FFFFFF"/>
                <path d="M4.46967 11.4697C4.73594 11.2034 5.1526 11.1792 5.44621 11.3971L5.53033 11.4697L10.5303 16.4697C10.8232 16.7626 10.8232 17.2374 10.5303 17.5303C10.2641 17.7966 9.8474 17.8208 9.55379 17.6029L9.46967 17.5303L4.46967 12.5303C4.17678 12.2374 4.17678 11.7626 4.46967 11.4697Z" fill="#FFFFFF"/>
            </svg>
        </button>

        <header>
            <h1>Allenamento 3</h1>
            <div class="subtitle">Total Body Leggero (Opzionale) - Sabato</div>
        </header>

        <!-- Cardio -->
        <div class="section">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">Cardio Moderato</div>
                <div class="section-duration">15 min</div>
            </div>
            <div class="section-content">
                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('c-cardio1')">
                    <div class="exercise-header">
                        <div class="checkbox" id="c-cardio1"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">Bike/Tapirulan</div>
                            <div class="exercise-details">12 minuti</div>
                        </div>
                        <div class="info-icon" onclick="event.stopPropagation(); showExerciseDetail('bike')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25ZM12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75Z" fill="white"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="white"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="white"/>
                            <path d="M11.85 7.24726C12.0916 7.24726 12.3066 7.36152 12.4437 7.53896L12.489 7.607L12.5583 7.65353C12.7104 7.7711 12.8161 7.94581 12.8432 8.14549L12.85 8.24726C12.85 8.79954 12.4023 9.24726 11.85 9.24726C11.2977 9.24726 10.85 8.79954 10.85 8.24726C10.85 7.69498 11.2977 7.24726 11.85 7.24726Z" fill="white"/>
                            <path d="M11.85 7.24726C12.4023 7.24726 12.85 7.69498 12.85 8.24726C12.85 8.66147 12.5142 8.99726 12.1 8.99726C11.8584 8.99726 11.6434 8.883 11.5063 8.70556L11.46 8.636L11.3917 8.59099C11.2396 8.47342 11.1339 8.29871 11.1068 8.09903L11.1 7.99726C11.1 7.58305 11.4358 7.24726 11.85 7.24726Z" fill="white"/>
                            </svg>
                            </div>
                    </div>
                </div>

                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('c-cardio2')">
                    <div class="exercise-header">
                        <div class="checkbox" id="c-cardio2"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">Ellittica</div>
                            <div class="exercise-details">5 minuti (se disponibile)</div>
                        </div>
                        <div class="info-icon" onclick="event.stopPropagation(); showExerciseDetail('ellittica')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25ZM12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75Z" fill="white"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="white"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="white"/>
                            <path d="M11.85 7.24726C12.0916 7.24726 12.3066 7.36152 12.4437 7.53896L12.489 7.607L12.5583 7.65353C12.7104 7.7711 12.8161 7.94581 12.8432 8.14549L12.85 8.24726C12.85 8.79954 12.4023 9.24726 11.85 9.24726C11.2977 9.24726 10.85 8.79954 10.85 8.24726C10.85 7.69498 11.2977 7.24726 11.85 7.24726Z" fill="white"/>
                            <path d="M11.85 7.24726C12.4023 7.24726 12.85 7.69498 12.85 8.24726C12.85 8.66147 12.5142 8.99726 12.1 8.99726C11.8584 8.99726 11.6434 8.883 11.5063 8.70556L11.46 8.636L11.3917 8.59099C11.2396 8.47342 11.1339 8.29871 11.1068 8.09903L11.1 7.99726C11.1 7.58305 11.4358 7.24726 11.85 7.24726Z" fill="white"/>
                            </svg>
                            </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Focus Spalle + Avambracci -->
        <div class="section">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">Focus Spalle + Avambracci</div>
                <div class="section-duration">20 min</div>
            </div>
            <div class="section-content">
                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('c-spalle1')">
                    <div class="exercise-header">
                        <div class="checkbox" id="c-spalle1"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">Alzate Laterali Cavo Mono</div>
                            <div class="exercise-details">3×15 • Rec 1'</div>
                        </div>
                        <div class="info-icon" onclick="event.stopPropagation(); showExerciseDetail('alzatecavo')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25ZM12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75Z" fill="white"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="white"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="white"/>
                            <path d="M11.85 7.24726C12.0916 7.24726 12.3066 7.36152 12.4437 7.53896L12.489 7.607L12.5583 7.65353C12.7104 7.7711 12.8161 7.94581 12.8432 8.14549L12.85 8.24726C12.85 8.79954 12.4023 9.24726 11.85 9.24726C11.2977 9.24726 10.85 8.79954 10.85 8.24726C10.85 7.69498 11.2977 7.24726 11.85 7.24726Z" fill="white"/>
                            <path d="M11.85 7.24726C12.4023 7.24726 12.85 7.69498 12.85 8.24726C12.85 8.66147 12.5142 8.99726 12.1 8.99726C11.8584 8.99726 11.6434 8.883 11.5063 8.70556L11.46 8.636L11.3917 8.59099C11.2396 8.47342 11.1339 8.29871 11.1068 8.09903L11.1 7.99726C11.1 7.58305 11.4358 7.24726 11.85 7.24726Z" fill="white"/>
                            </svg>
                            </div>
                    </div>
                </div>

                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('c-spalle2')">
                    <div class="exercise-header">
                        <div class="checkbox" id="c-spalle2"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">Aperture 90° Deltoidi Posteriori</div>
                            <div class="exercise-details">3×15 • Rec 1'</div>
                        </div>
                        <div class="info-icon" onclick="event.stopPropagation(); showExerciseDetail('aperture90')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25ZM12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75Z" fill="white"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="white"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="white"/>
                            <path d="M11.85 7.24726C12.0916 7.24726 12.3066 7.36152 12.4437 7.53896L12.489 7.607L12.5583 7.65353C12.7104 7.7711 12.8161 7.94581 12.8432 8.14549L12.85 8.24726C12.85 8.79954 12.4023 9.24726 11.85 9.24726C11.2977 9.24726 10.85 8.79954 10.85 8.24726C10.85 7.69498 11.2977 7.24726 11.85 7.24726Z" fill="white"/>
                            <path d="M11.85 7.24726C12.4023 7.24726 12.85 7.69498 12.85 8.24726C12.85 8.66147 12.5142 8.99726 12.1 8.99726C11.8584 8.99726 11.6434 8.883 11.5063 8.70556L11.46 8.636L11.3917 8.59099C11.2396 8.47342 11.1339 8.29871 11.1068 8.09903L11.1 7.99726C11.1 7.58305 11.4358 7.24726 11.85 7.24726Z" fill="white"/>
                            </svg>
                            </div>
                    </div>
                </div>

                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('c-spalle3')">
                    <div class="exercise-header">
                        <div class="checkbox" id="c-spalle3"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">Farmer's Walk</div>
                            <div class="exercise-details">3×30-45 metri • Rec 2'</div>
                        </div>
                        <div class="info-icon" onclick="event.stopPropagation(); showExerciseDetail('farmerswalk')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25ZM12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75Z" fill="white"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="white"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="white"/>
                            <path d="M11.85 7.24726C12.0916 7.24726 12.3066 7.36152 12.4437 7.53896L12.489 7.607L12.5583 7.65353C12.7104 7.7711 12.8161 7.94581 12.8432 8.14549L12.85 8.24726C12.85 8.79954 12.4023 9.24726 11.85 9.24726C11.2977 9.24726 10.85 8.79954 10.85 8.24726C10.85 7.69498 11.2977 7.24726 11.85 7.24726Z" fill="white"/>
                            <path d="M11.85 7.24726C12.4023 7.24726 12.85 7.69498 12.85 8.24726C12.85 8.66147 12.5142 8.99726 12.1 8.99726C11.8584 8.99726 11.6434 8.883 11.5063 8.70556L11.46 8.636L11.3917 8.59099C11.2396 8.47342 11.1339 8.29871 11.1068 8.09903L11.1 7.99726C11.1 7.58305 11.4358 7.24726 11.85 7.24726Z" fill="white"/>
                            </svg>
                            </div>
                    </div>
                </div>

                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('c-spalle4')">
                    <div class="exercise-header">
                        <div class="checkbox" id="c-spalle4"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">Burpees</div>
                            <div class="exercise-details">3×30" • Rec 30"</div>
                        </div>
                        <div class="info-icon" onclick="event.stopPropagation(); showExerciseDetail('burpees')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25ZM12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75Z" fill="white"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="white"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="white"/>
                            <path d="M11.85 7.24726C12.0916 7.24726 12.3066 7.36152 12.4437 7.53896L12.489 7.607L12.5583 7.65353C12.7104 7.7711 12.8161 7.94581 12.8432 8.14549L12.85 8.24726C12.85 8.79954 12.4023 9.24726 11.85 9.24726C11.2977 9.24726 10.85 8.79954 10.85 8.24726C10.85 7.69498 11.2977 7.24726 11.85 7.24726Z" fill="white"/>
                            <path d="M11.85 7.24726C12.4023 7.24726 12.85 7.69498 12.85 8.24726C12.85 8.66147 12.5142 8.99726 12.1 8.99726C11.8584 8.99726 11.6434 8.883 11.5063 8.70556L11.46 8.636L11.3917 8.59099C11.2396 8.47342 11.1339 8.29871 11.1068 8.09903L11.1 7.99726C11.1 7.58305 11.4358 7.24726 11.85 7.24726Z" fill="white"/>
                            </svg>
                            </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Core Finale -->
        <div class="section">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">Core Finale</div>
                <div class="section-duration">10 min</div>
            </div>
            <div class="section-content">
                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('c-core1')">
                    <div class="exercise-header">
                        <div class="checkbox" id="c-core1"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">Russian Twist</div>
                            <div class="exercise-details">4×20 totali • Rec 30"</div>
                        </div>
                        <div class="info-icon" onclick="event.stopPropagation(); showExerciseDetail('russiantwist')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25ZM12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75Z" fill="white"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="white"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="white"/>
                            <path d="M11.85 7.24726C12.0916 7.24726 12.3066 7.36152 12.4437 7.53896L12.489 7.607L12.5583 7.65353C12.7104 7.7711 12.8161 7.94581 12.8432 8.14549L12.85 8.24726C12.85 8.79954 12.4023 9.24726 11.85 9.24726C11.2977 9.24726 10.85 8.79954 10.85 8.24726C10.85 7.69498 11.2977 7.24726 11.85 7.24726Z" fill="white"/>
                            <path d="M11.85 7.24726C12.4023 7.24726 12.85 7.69498 12.85 8.24726C12.85 8.66147 12.5142 8.99726 12.1 8.99726C11.8584 8.99726 11.6434 8.883 11.5063 8.70556L11.46 8.636L11.3917 8.59099C11.2396 8.47342 11.1339 8.29871 11.1068 8.09903L11.1 7.99726C11.1 7.58305 11.4358 7.24726 11.85 7.24726Z" fill="white"/>
                            </svg>
                            </div>
                    </div>
                </div>

                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('c-core2')">
                    <div class="exercise-header">
                        <div class="checkbox" id="c-core2"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">Hollow Rock</div>
                            <div class="exercise-details">4× tempo massimo • Rec 30"</div>
                        </div>
                        <div class="info-icon" onclick="event.stopPropagation(); showExerciseDetail('hollowrock')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25ZM12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75Z" fill="white"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="white"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="white"/>
                            <path d="M11.85 7.24726C12.0916 7.24726 12.3066 7.36152 12.4437 7.53896L12.489 7.607L12.5583 7.65353C12.7104 7.7711 12.8161 7.94581 12.8432 8.14549L12.85 8.24726C12.85 8.79954 12.4023 9.24726 11.85 9.24726C11.2977 9.24726 10.85 8.79954 10.85 8.24726C10.85 7.69498 11.2977 7.24726 11.85 7.24726Z" fill="white"/>
                            <path d="M11.85 7.24726C12.4023 7.24726 12.85 7.69498 12.85 8.24726C12.85 8.66147 12.5142 8.99726 12.1 8.99726C11.8584 8.99726 11.6434 8.883 11.5063 8.70556L11.46 8.636L11.3917 8.59099C11.2396 8.47342 11.1339 8.29871 11.1068 8.09903L11.1 7.99726C11.1 7.58305 11.4358 7.24726 11.85 7.24726Z" fill="white"/>
                            </svg>
                            </div>
                    </div>
                </div>

                <div class="exercise-item" onclick="event.stopPropagation(); toggleCheck('c-core3')">
                    <div class="exercise-header">
                        <div class="checkbox" id="c-core3"></div>
                        <div class="exercise-info">
                            <div class="exercise-name">Plank</div>
                            <div class="exercise-details">2×60"</div>
                        </div>
                        <div class="info-icon" onclick="event.stopPropagation(); showExerciseDetail('plank')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25ZM12 3.75C7.44365 3.75 3.75 7.44365 3.75 12C3.75 16.5563 7.44365 20.25 12 20.25C16.5563 20.25 20.25 16.5563 20.25 12C20.25 7.44365 16.5563 3.75 12 3.75Z" fill="white"/>
                            <path d="M13.31 14.75C13.7242 14.75 14.06 15.0858 14.06 15.5C14.06 15.8797 13.7778 16.1935 13.4118 16.2432L13.31 16.25H11C10.5858 16.25 10.25 15.9142 10.25 15.5C10.25 15.1203 10.5322 14.8065 10.8982 14.7568L11 14.75H13.31Z" fill="white"/>
                            <path d="M12.159 10.5C12.5387 10.5 12.8525 10.7822 12.9022 11.1482L12.909 11.25V15.5C12.909 15.9142 12.5732 16.25 12.159 16.25C11.7793 16.25 11.4655 15.9678 11.4158 15.6018L11.409 15.5V12H11.009C10.6293 12 10.3155 11.7178 10.2658 11.3518L10.259 11.25C10.259 10.8703 10.5412 10.5565 10.9072 10.5068L11.009 10.5H12.159Z" fill="white"/>
                            <path d="M11.85 7.24726C12.0916 7.24726 12.3066 7.36152 12.4437 7.53896L12.489 7.607L12.5583 7.65353C12.7104 7.7711 12.8161 7.94581 12.8432 8.14549L12.85 8.24726C12.85 8.79954 12.4023 9.24726 11.85 9.24726C11.2977 9.24726 10.85 8.79954 10.85 8.24726C10.85 7.69498 11.2977 7.24726 11.85 7.24726Z" fill="white"/>
                            <path d="M11.85 7.24726C12.4023 7.24726 12.85 7.69498 12.85 8.24726C12.85 8.66147 12.5142 8.99726 12.1 8.99726C11.8584 8.99726 11.6434 8.883 11.5063 8.70556L11.46 8.636L11.3917 8.59099C11.2396 8.47342 11.1339 8.29871 11.1068 8.09903L11.1 7.99726C11.1 7.58305 11.4358 7.24726 11.85 7.24726Z" fill="white"/>
                            </svg>
                            </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modale Dettaglio Esercizio -->
    <div id="exerciseModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="modalTitle"></div>
                <button class="close-button" onclick="closeModal()">×</button>
            </div>
            <div id="modalBody"></div>
        </div>
    </div>

    <!-- Timer Tabata -->
    <div id="tabataTimer" class="timer-modal">
        <div class="timer-content">
            <div class="timer-phase" id="timerPhase">LAVORO</div>
            <div class="timer-exercise" id="timerExercise">V-up</div>

            <div class="timer-circle">
                <svg viewBox="0 0 280 280">
                    <circle class="timer-circle-bg" cx="140" cy="140" r="130"/>
                    <circle id="timerCircleProgress" class="timer-circle-progress" cx="140" cy="140" r="130"
                        stroke-dasharray="817" stroke-dashoffset="0"/>
                </svg>
                <div class="timer-number" id="timerNumber">20</div>
            </div>

            <div class="timer-rounds" id="timerRounds">Round 1/8</div>

            <div class="timer-controls">
                <button class="timer-btn secondary" onclick="stopTabata()">Stop</button>
                <button class="timer-btn" id="timerPlayPause" onclick="toggleTabata()">Pausa</button>
            </div>
        </div>
    </div>

    <!-- Recovery Toast -->
    <div id="recoveryToast" class="recovery-toast">
        <div id="recoveryTime">1:30</div>
    </div>

    <!-- Workout Assistant -->
    <div id="workoutAssistant" class="workout-assistant">
        <div class="assistant-content">
            <div class="assistant-header">
                <button class="close-assistant" onclick="closeWorkoutAssistant()">X</button>
            </div>

            <div class="assistant-status-tag" id="assistantStatusTag">IN PROGRESS</div>

            <div class="assistant-exercise-name" id="assistantExerciseName">Squat</div>

            <div class="assistant-sets-info">
                <div class="sets-to-do" id="assistantSetsToDo">Ripetizioni: 8</div>
                <div class="sets-progress" id="assistantSetsProgress">Serie 1/4</div>
            </div>

            <div class="assistant-stopwatch" id="assistantStopwatch">
                <div class="stopwatch-label">Tempo esecuzione</div>
                <div class="stopwatch-display" id="assistantStopwatchDisplay">0:00</div>
            </div>

            <div class="assistant-timer" id="assistantTimer">
                <div class="timer-label">Recupero</div>
                <div class="timer-display" id="assistantTimerDisplay">1:30</div>
            </div>

            <div class="assistant-instructions" id="assistantInstructions">
                <div class="instructions-title">Come eseguire</div>
                <div class="instructions-text" id="assistantInstructionsText"></div>
            </div>

            <div class="assistant-controls">
                <button class="assistant-btn primary" id="assistantActionBtn" onclick="workoutAssistantAction()">Fatto - Inizia Recupero</button>
            </div>
        </div>
    </div>

    <!-- Pagina Storico -->
    <div id="historyView" class="history-view">
        <header>
            <h1>Storico Allenamenti</h1>
            <div class="subtitle">I tuoi progressi</div>
        </header>
        <div id="historyList"></div>
    </div>


    <script>
        // Database esercizi con tutte le info dal PDF
        const exerciseData = {
            // Riscaldamento
            bike: {
                name: 'Bike/Tapirulan',
                focus: 'Cardio a basso impatto, riscaldamento',
                come: 'Pedalare sulla cyclette a intensità moderata mantenendo una frequenza cardiaca costante.',
                tecnica: 'Respirazione regolare, postura corretta sulla sella',
                note: 'Riscaldamento',
                duration: 720 // 12 minuti in secondi
            },
            circonduzione: {
                name: 'Circonduzione Braccia',
                focus: 'Mobilità spalle',
                come: 'In piedi, ruotare le braccia descrivendo ampi cerchi, prima in avanti poi indietro.',
                tecnica: 'Movimenti ampi e controllati, non forzare',
                note: ''
            },
            mobilita: {
                name: 'Mobilità Spalle e Polsi',
                focus: 'Preparazione articolazioni',
                come: 'Eseguire rotazioni delle spalle e dei polsi in tutte le direzioni.',
                tecnica: 'Movimenti lenti e controllati',
                note: ''
            },

            // Fisioterapia Allenamento A
            heelraises: {
                name: 'SL Heel Raises con Step',
                series: '3×10-15 per lato',
                carico: 'Manubrio 8 KG',
                recupero: '1\'',
                focus: 'Polpacci e stabilità della caviglia',
                come: 'In piedi su uno step, solleva il tallone sulla punta del piede (un piede alla volta). Il ginocchio deve rimanere dritto. Tieni un manubrio in mano per equilibrio e carico.',
                tecnica: 'Movimento lento e controllato, pausa in alto',
                note: 'Sollevamento sulla punta, ginocchio dritto',
                image: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ2ifIblAU8-vymQNpYc1DtQKv_4SivDwwtbw&s',
                fisio: true
            },
            boxbridge: {
                name: 'SL Box Bridge',
                series: '3×5+10+5 per lato',
                carico: '-',
                recupero: '1\'',
                focus: 'Glutei, core, stabilità unilaterale',
                come: 'Sdraiato supino, un piede appoggiato su un box/step, l\'altro sollevato. Solleva i fianchi contraendo i glutei.',
                tecnica: '"Alza bene il sedere" - contrai fortemente i glutei in alto',
                note: 'Alza bene il sedere',
                image: 'https://i.ytimg.com/vi/NK4WJme6IXo/hq720.jpg?sqp=-oaymwEhCK4FEIIDSFryq4qpAxMIARUAAAAAGAElAADIQj0AgKJD&rs=AOn4CLC1B5hfxu1CitmI6x0vaSKGPUK28Q',
                fisio: true
            },
            hipthrust: {
                name: 'Hip Thrust',
                series: '3×12',
                carico: '30 KG',
                recupero: 'SS (Superserie con Side Walk)',
                focus: 'Glutei, forza posteriore catena',
                come: 'Schiena appoggiata alla panca, bilanciere sui fianchi. Spingi i fianchi verso l\'alto contraendo i glutei.',
                tecnica: 'Pausa di 2 secondi nella posizione alta, controllo del movimento',
                note: 'Stai 2" su ad ogni ripetizione',
                image: 'https://hips.hearstapps.com/hmg-prod/images/barbell-hip-thrust-6549fb67257af.png?resize=980:*',
                fisio: true
            },
            sidewalk: {
                name: 'Side Walk',
                series: '3×6-6/4-4/2-2',
                carico: 'Elastico sui piedi',
                recupero: '1\'',
                focus: 'Glutei medi, stabilità dell\'anca',
                come: 'Elastico intorno alle caviglie, cammina lateralmente mantenendo tensione costante. Non trascinare i piedi.',
                tecnica: 'Elastico sempre in tensione, passi controllati',
                note: 'Non strisciare il piede, elastico sempre in tensione',
                image: 'https://www.functionaltrainingschool.com/wp-content/uploads/2020/07/Mini-band-side-walk.jpg',
                fisio: true
            },
            elvis: {
                name: 'Elvis in Equilibrio su un Piede',
                series: '2×10 per lato',
                carico: 'Tappetino piegato',
                recupero: 'No rest',
                focus: 'Equilibrio e stabilità',
                come: 'In equilibrio su un piede, eseguire movimenti controllati.',
                tecnica: 'Esecuzione lenta',
                note: 'Tappetino piegato',
                fisio: true
            },

            // Upper Body Push
            pancapiana: {
                name: 'Panca Piana Manubri',
                series: '4×8',
                carico: 'Progressivo',
                recupero: '1\'30"',
                focus: 'Pettorali, spalle anteriori, tricipiti',
                come: 'Sdraiato su panca, manubri in mano, abbassa i pesi verso il petto e spingi verso l\'alto.',
                tecnica: 'Controllo eccentrico, fermo 1" al petto, non far rimbalzare',
                note: 'Concentrati sul controllo eccentrico, fermo al petto 1"',
                image: 'https://articoli.nonsolofitness.it/resources/originals/7309abb1ee89afc90ef8acf9ad101094.jpg'
            },
            croci: {
                name: 'Croci Panca Inclinata 32°',
                series: '3×20 iso 2"',
                carico: 'Manubri',
                recupero: '2\'',
                focus: 'Pettorali (parte alta), definizione',
                come: 'Su panca inclinata, braccia aperte con manubri, abbassa lateralmente e richiudi sopra il petto.',
                tecnica: 'Pausa isometrica 2", poi subito push-up senza pausa',
                note: 'Superset: esaurimento croci → push-up immediati',
                image: 'https://www.muscoli.info/Media/MuscoliInfo/Immagini/Esercizi/croci-con-manubri-su-panca-inclinata.jpg'
            },
            militarypress: {
                name: 'Military Press Manubri',
                series: '3×10',
                carico: 'Progressivo',
                recupero: '1\'30"',
                focus: 'Spalle (deltoidi), core',
                come: 'In piedi o seduto, manubri all\'altezza spalle, spingi verso l\'alto sopra la testa.',
                tecnica: 'Core attivo, non inarcare la schiena, movimento verticale',
                note: 'Core attivo, non inarcare la schiena',
                image: 'https://www.muscoli.info/Media/MuscoliInfo/Immagini/Esercizi/lento-con-manubri.jpg'
            },
            alzatelaterali: {
                name: 'Alzate Laterali',
                series: '3×12',
                carico: 'Manubri leggeri',
                recupero: '1\'',
                focus: 'Deltoidi laterali',
                come: 'In piedi, alza i manubri lateralmente fino all\'altezza delle spalle.',
                tecnica: 'Focus forma, non carico',
                note: 'Focus forma, non carico',
                image: 'https://www.my-personaltrainer.it/2023/01/12/alzate-laterali-orig.jpeg'
            },
            pushdown: {
                name: 'Push Down Corda',
                series: '3×12',
                carico: 'Cavo',
                recupero: '1\'30"',
                focus: 'Tricipiti',
                come: 'Al cavo, corda in mano, spingi verso il basso estendendo i tricipiti. Separa la corda in fondo.',
                tecnica: 'Gomiti fissi ai fianchi, contrazione finale',
                note: 'Tricipiti',
                image: 'https://www.projectinvictus.it/wp-content/uploads/2018/02/Macchine-2.0.png'
            },
            dips: {
                name: 'Dips tra Sedie',
                series: '3× max',
                carico: 'Corpo libero',
                recupero: '1\'30"',
                focus: 'Tricipiti, pettorali',
                come: 'Tra due sedie, abbassa il corpo flettendo i gomiti e risali.',
                tecnica: 'Controllo del movimento, non forzare se dà fastidio alla spalla',
                note: 'Se non dà fastidio alla spalla',
                image: 'https://www.muscoli.info/Media/MuscoliInfo/Immagini/Esercizi/distensioni-o-dip-alle-parallele-della-sedia-del-capitano.jpg'
            },

            // Fisioterapia Allenamento B
            catcow: {
                name: 'Cat-Cow',
                focus: 'Mobilità colonna vertebrale',
                come: 'A quattro zampe, alterna la posizione della schiena tra arcuata (cat) e insellata (cow).',
                tecnica: 'Movimenti lenti e controllati',
                note: '',
                image: 'https://www.alessioferlito.it/wp-content/uploads/2023/07/Cat-cow-3-1024x576.png'
            },
            deadbug: {
                name: 'Dead Bug',
                focus: 'Core, stabilità',
                come: 'Supino, braccia e gambe in alto. Abbassa alternativamente braccio e gamba opposti.',
                tecnica: 'Mantieni la schiena aderente al pavimento',
                note: '',
                video: 'https://www.youtube.com/watch?v=g_BYB0R-4Ws'
            },
            plankestensione: {
                name: 'Plank + Estensione Anca Alternata',
                series: '4×45"',
                carico: '-',
                recupero: 'SS (Superserie con L-Sit)',
                focus: 'Core, glutei, stabilità',
                come: 'Posizione plank, alterna l\'estensione di una gamba verso l\'alto mantenendo il core stabile.',
                tecnica: 'Non ruotare il bacino, movimento controllato',
                note: '',
                image: 'https://www.spine-center.it/images/contenuti/news/il-plank-come-esercizio-terapeutico-in-campo-riabilitativo.jpg',
                fisio: true
            },
            lsit: {
                name: 'L-Sit',
                series: '4×45"',
                carico: '-',
                recupero: '45"',
                focus: 'Core, forza funzionale',
                come: 'Seduto per terra, gambe distese, solleva tutto il corpo con le braccia. Ginocchia in massima estensione, piedi a martello.',
                tecnica: 'Non mollare mai, gambe che non si toccano',
                note: 'Ginocchia in massima estensione, non mollare mai, piedi a martello e gambe che non si toccano',
                image: 'https://www.projectinvictus.it/wp-content/uploads/2023/07/17-scaled.jpg',
                fisio: true
            },
            squattempo: {
                name: 'Squat Tempo',
                series: '3×8',
                carico: '20 KG',
                recupero: 'SS (Superserie con Wall Sit)',
                focus: 'Quadricipiti, controllo',
                come: 'Squat eseguito con tempo controllato: 3" in discesa, 3" fermo in basso, 3" in salita.',
                tecnica: '3" a scendere, 3" fermo iso, 3" a salire',
                note: '3" a scendere, 3" fermo iso, 3" a salire',
                image: 'https://www.sustainablebb.com/wp-content/uploads/2023/12/1-1024x819.jpg',
                fisio: true
            },
            wallsit: {
                name: 'Wall Sit',
                series: '3×40"',
                carico: '-',
                recupero: '2\'',
                focus: 'Quadricipiti, resistenza muscolare',
                come: 'Schiena contro il muro, scivola giù fino a cosce parallele al pavimento (90° alle ginocchia). Mantieni la posizione.',
                tecnica: 'Schiena sempre contro il muro, distribuzione peso sui talloni',
                note: '',
                image: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ2GX0zHkq463-ra0ocvD9z_foahJgR_mBArQ&s',
                fisio: true
            },
            affondo: {
                name: 'Affondo Statico con Disco sopra la Testa',
                series: '3×10 per lato',
                carico: 'Disco 5 KG',
                recupero: '2\'',
                focus: 'Gambe, core, stabilità',
                come: 'Posizione di affondo statico, disco sollevato sopra la testa.',
                tecnica: 'Vedi video, occhio agli angoli',
                note: 'Vedi video, occhio agli angoli',
                image: 'https://static.vecteezy.com/ti/vettori-gratis/p1/8424324-uomo-che-fa-affondo-con-bilanciere-piatto-illustrazione-isolato-su-sfondo-bianco-vettoriale.jpg',
                fisio: true
            },

            // Upper Body Pull
            trazioni: {
                name: 'Trazioni / Lat Machine',
                series: '4×6 (o Lat Machine 4×10)',
                carico: 'Corpo libero o macchina',
                recupero: '1\'',
                focus: 'Dorsali, bicipiti, grip strength',
                come: 'Appeso alla sbarra (trazioni) o seduto alla lat machine, tira il corpo/peso verso l\'alto.',
                tecnica: 'Discesa lenta 3 secondi, retrazione scapole',
                note: 'Discesa lenta 3 secondi (come suggerito dai PT). Se non riesci: Lat Machine 4×10',
                image: 'https://s3assets.skimble.com/assets/1825601/image_full.jpg'
            },
            pulley: {
                name: 'Pulley/Rematore Cavo',
                series: '3×12',
                carico: 'Cavo',
                recupero: '1\'',
                focus: 'Schiena, dorsali',
                come: 'Seduto al cavo, tira verso il petto mantenendo la schiena dritta.',
                tecnica: 'Schiena, focus retrazione scapole',
                note: 'Schiena, focus retrazione scapole',
                image: 'https://www.abcallenamento.it/wp-content/uploads/2021/10/seated-cable-row-middle-back-1.600x420.73982.jpg'
            },
            curlpanca: {
                name: 'Curl Panca 59° Manubri',
                series: '3×10',
                carico: 'Manubri',
                recupero: '2\'',
                focus: 'Bicipiti',
                come: 'Su panca inclinata a 59°, esegui curl con manubri.',
                tecnica: 'Movimento controllato',
                note: 'Bicipiti',
                image: 'https://www.muscoli.info/Media/MuscoliInfo/Immagini/Esercizi/curl-con-manubri-a-presa-supina-su-panca-inclinata.jpg'
            },
            hammercurl: {
                name: 'Hammer Curl',
                series: '3×10 iso 2"',
                carico: 'Manubri',
                recupero: '2\'',
                focus: 'Bicipiti, avambracci',
                come: 'Manubri con presa neutra (palmi verso interno), fletti i gomiti portando i pesi verso le spalle.',
                tecnica: 'Pausa isometrica 2", movimento controllato',
                note: 'Bicipiti e avambracci',
                image: 'https://www.my-personaltrainer.it/2023/01/04/hammer-curl_900x760.jpeg'
            },
            curlpolsi: {
                name: 'Curl Polsi',
                series: '3×15',
                carico: 'Manubri',
                recupero: '1\'',
                focus: 'Avambracci, grip strength',
                come: 'Seduto, avambracci appoggiati alle cosce, fletti i polsi verso l\'alto tenendo i manubri.',
                tecnica: 'Solo movimento dei polsi, controllo eccentrico',
                note: 'Specifico avambracci (molto importante per te)',
                image: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQYupNbpO5s8rTraJvHNHNcVg3cTsoYZhL0XQ&s'
            },
            reversecurl: {
                name: 'Reverse Curl',
                series: '3×12',
                carico: 'Manubri',
                recupero: '1\'',
                focus: 'Avambracci',
                come: 'Curl con presa prona (dorso della mano verso l\'alto).',
                tecnica: 'Movimento controllato',
                note: 'Flessori avambracci',
                image: 'https://www.lyfta.app/_next/image?url=https%3A%2F%2Flyfta.app%2Fimages%2Fexercises%2F03681101.png&w=640&q=80'
            },
            farmerswalk: {
                name: 'Farmer\'s Walk',
                series: '2×30-45 metri (o 3×)',
                carico: 'Manubri pesanti',
                recupero: '2\'',
                focus: 'Avambracci, grip strength, core',
                come: 'Manubri pesanti in mano, cammina mantenendo postura eretta per la distanza/tempo prestabilito.',
                tecnica: 'Postura perfetta, spalle indietro, passi controllati',
                note: 'Fondamentale per presa e avambracci',
                image: 'https://www.healthyway.it/wp-content/uploads/2024/06/grip-training-allenamento-1024x683.jpg'
            },

            // Addominali
            vup: {
                name: 'V-up',
                focus: 'Core, addominali superiori e inferiori',
                come: 'Sdraiato supino, solleva simultaneamente gambe e busto formando una V.',
                tecnica: 'Movimento controllato, espira in contrazione',
                note: 'App Tabata Timer - 20" lavoro / 10" riposo',
                image: 'https://i.ytimg.com/vi/7UVgs18Y1P4/maxresdefault.jpg'
            },
            crunch: {
                name: 'Crunch',
                focus: 'Addominali',
                come: 'Sdraiato supino, solleva le spalle da terra contraendo gli addominali.',
                tecnica: 'Non tirare il collo, focus sulla contrazione',
                note: 'App Tabata Timer - 20" lavoro / 10" riposo',
                image: 'https://www.muscoli.info/Media/MuscoliInfo/Immagini/Esercizi/crunch-a-terra.jpg'
            },
            biciclette: {
                name: 'Biciclette',
                focus: 'Addominali obliqui',
                come: 'Supino, alterna gomito-ginocchio opposti simulando la pedalata.',
                tecnica: 'Movimento controllato, torsione del busto',
                note: 'App Tabata Timer - 20" lavoro / 10" riposo',
                image: 'https://www.muscoli.info/Media/MuscoliInfo/Immagini/Esercizi/crunch-a-bicicletta.jpg'
            },
            plank: {
                name: 'Plank',
                focus: 'Core, stabilità',
                come: 'Posizione prona sugli avambracci, corpo in linea retta dalla testa ai piedi.',
                tecnica: 'Core attivo, non far cedere i fianchi',
                note: 'Mantieni la posizione',
                image: 'https://www.posturabenessere.com/resources/big/717de221a388659d4e1ff6e192c12350.jpg.webp'
            },
            hollowhold: {
                name: 'Hollow Hold',
                series: '3×30"',
                recupero: '1\'',
                focus: 'Core',
                come: 'Supino, solleva spalle e gambe da terra, schiena aderente al pavimento.',
                tecnica: 'Schiena sempre a contatto con il pavimento',
                note: '',
                image: 'https://www.calistenia.net/wp-content/uploads/2017/03/Hollow-Body-Hold.gif'
            },
            reversecrunch: {
                name: 'Reverse Crunch',
                series: '3×15',
                recupero: '1\'',
                focus: 'Addominali bassi',
                come: 'Supino, porta le ginocchia al petto sollevando il bacino.',
                tecnica: 'Movimento controllato, non usare lo slancio',
                note: '',
                image: 'https://articoli.nonsolofitness.it/resources/originals/0d04b469007373803f32db2b92dc7a66.jpg'
            },
            planklaterale: {
                name: 'Plank Laterale',
                series: '2×30" per lato',
                recupero: '1\'',
                focus: 'Core, obliqui',
                come: 'Sul fianco, corpo in linea dall\'avambraccio ai piedi.',
                tecnica: 'Mantieni il corpo dritto, non far cedere i fianchi',
                note: '',
                image: 'https://i.ytimg.com/vi/SzKsA7HdzKc/maxresdefault.jpg'
            },

            // Allenamento C
            ellittica: {
                name: 'Ellittica',
                focus: 'Cardio total body',
                come: 'Cardio a basso impatto su macchina ellittica.',
                tecnica: 'Movimento fluido, intensità moderata',
                note: 'Se disponibile'
            },
            alzatecavo: {
                name: 'Alzate Laterali Cavo Mono',
                series: '3×15',
                carico: 'Cavo',
                recupero: '1\'',
                focus: 'Deltoidi laterali',
                come: 'Al cavo basso, un braccio alla volta, solleva lateralmente.',
                tecnica: 'Movimento controllato',
                note: '',
                image: 'https://www.muscoli.info/Media/MuscoliInfo/Immagini/Esercizi/alzate-laterali-ai-cavi.jpg'
            },
            aperture90: {
                name: 'Aperture 90° Deltoidi Posteriori',
                series: '3×15',
                carico: 'Manubri',
                recupero: '1\'',
                focus: 'Deltoidi posteriori',
                come: 'Busto inclinato a 90°, apri le braccia lateralmente con manubri.',
                tecnica: 'Focus sulla contrazione dei deltoidi posteriori',
                note: '',
                image: 'https://www.my-personaltrainer.it/2023/01/12/croci-inverse_crop_resize.jpeg'
            },
            burpees: {
                name: 'Burpees',
                series: '3×30"',
                carico: 'Corpo libero',
                recupero: '30"',
                focus: 'Cardio total body, esplosività',
                come: 'Dalla posizione eretta: scendi in squat, appoggia le mani a terra, salta indietro in plank, esegui un push-up (opzionale), riporta i piedi vicino alle mani e salta in alto con le braccia sopra la testa.',
                tecnica: 'Movimento fluido e continuo, esplosione nel salto finale, atterraggio controllato',
                note: 'Mantieni il ritmo costante, adatta l\'intensità al tuo livello',
                image: 'https://www.pietropaganini.it/web/wp-content/uploads/2017/07/burpee-1.jpg'
            },
            russiantwist: {
                name: 'Russian Twist',
                series: '4×20 totali',
                carico: 'Opzionale disco/manubrio',
                recupero: '30"',
                focus: 'Addominali obliqui',
                come: 'Seduto, busto inclinato indietro, ruota il busto lateralmente.',
                tecnica: 'Movimento controllato, espira in torsione',
                note: '',
                image: 'https://cdn.prod.website-files.com/6214dbeb0bc91b35790477f3/6682d4e842714376c5cde25b_0e861ef1-8313-494d-88d5-512daf305285.webp'
            },
            hollowrock: {
                name: 'Hollow Rock',
                series: '4× tempo massimo',
                carico: '-',
                recupero: '30"',
                focus: 'Core',
                come: 'Posizione hollow hold, dondola avanti e indietro.',
                tecnica: 'Mantieni la forma hollow, movimento piccolo',
                note: '',
                image: 'https://i.ytimg.com/vi/jOjWxZsiJFE/maxresdefault.jpg'
            }
        };

        // Gestione checklist e localStorage
        function toggleCheck(id) {
            const checkbox = document.getElementById(id);
            checkbox.classList.toggle('checked');
            saveProgress();
            updateProgress();
        }

        function toggleSection(header) {
            const content = header.nextElementSibling;
            header.classList.toggle('expanded');
            content.classList.toggle('expanded');
        }

        function saveProgress() {
            const checkboxes = document.querySelectorAll('.checkbox');
            const progress = {};
            checkboxes.forEach(cb => {
                progress[cb.id] = cb.classList.contains('checked');
            });
            localStorage.setItem('workoutProgress', JSON.stringify(progress));
        }

        function loadProgress() {
            const saved = localStorage.getItem('workoutProgress');
            if (saved) {
                const progress = JSON.parse(saved);
                Object.keys(progress).forEach(id => {
                    const checkbox = document.getElementById(id);
                    if (checkbox && progress[id]) {
                        checkbox.classList.add('checked');
                    }
                });
            }
            updateProgress();
        }

        function updateProgress() {
            updateWorkoutProgress('A', 24);
            updateWorkoutProgress('B', 22);
            updateWorkoutProgress('C', 12);
        }

        function clearCache() {
            if (confirm('Vuoi cancellare tutti i progressi salvati? Questa azione non può essere annullata.')) {
                localStorage.clear();
                location.reload();
            }
        }

        function updateWorkoutProgress(workout, total) {
            const prefix = workout.toLowerCase();
            const checkboxes = document.querySelectorAll(`[id^="${prefix}-"]`);
            let completed = 0;
            checkboxes.forEach(cb => {
                if (cb.classList.contains('checked')) completed++;
            });
            const percentage = (completed / total) * 100;
            document.getElementById(`progress${workout}`).style.width = percentage + '%';
            document.getElementById(`progressText${workout}`).textContent = `${completed}/${total}`;
        }

        function resetAllProgress() {
            if (confirm('Vuoi resettare tutti i progressi degli allenamenti?')) {
                localStorage.removeItem('workoutProgress');
                document.querySelectorAll('.checkbox').forEach(cb => {
                    cb.classList.remove('checked');
                });
                updateProgress();
            }
        }

        // Navigazione
        function openWorkout(workoutId) {
            document.getElementById('homeView').classList.add('hidden');
            document.getElementById(workoutId).classList.add('visible');
            window.scrollTo(0, 0);
        }

        function closeWorkout() {
            document.querySelectorAll('.workout-detail').forEach(w => {
                w.classList.remove('visible');
            });
            document.getElementById('homeView').classList.remove('hidden');
            window.scrollTo(0, 0);
        }

        // Modale esercizio
        function showExerciseDetail(exerciseKey) {
            const exercise = exerciseData[exerciseKey];
            if (!exercise) return;

            const modal = document.getElementById('exerciseModal');
            const title = document.getElementById('modalTitle');
            const body = document.getElementById('modalBody');

            title.textContent = exercise.name;

            let html = '';

            // Immagine o video
            if (exercise.image) {
                html += `<img src="${exercise.image}" alt="${exercise.name}" class="exercise-image" />`;
            } else if (exercise.video) {
                const videoId = exercise.video.includes('youtube.com') || exercise.video.includes('youtu.be')
                    ? exercise.video.split('/').pop().split('?')[0].replace('watch?v=', '')
                    : '';
                if (videoId) {
                    html += `<iframe class="exercise-video" src="https://www.youtube.com/embed/${videoId}" frameborder="0" allowfullscreen></iframe>`;
                }
            }

            // Info principali
            if (exercise.series || exercise.carico || exercise.recupero) {
                html += '<div class="detail-grid">';
                if (exercise.series) {
                    html += `<div class="detail-box">
                        <div class="detail-box-label">Serie × Rip</div>
                        <div class="detail-box-value">${exercise.series}</div>
                    </div>`;
                }
                if (exercise.carico) {
                    html += `<div class="detail-box">
                        <div class="detail-box-label">Carico</div>
                        <div class="detail-box-value">${exercise.carico}</div>
                    </div>`;
                }
                if (exercise.recupero) {
                    html += `<div class="detail-box">
                        <div class="detail-box-label">Recupero</div>
                        <div class="detail-box-value">${exercise.recupero}</div>
                    </div>`;
                }
                html += '</div>';
            }

            // Focus
            if (exercise.focus) {
                html += `<div class="detail-section">
                    <div class="detail-label">Focus</div>
                    <div class="detail-value">${exercise.focus}</div>
                </div>`;
            }

            // Come si fa
            if (exercise.come) {
                html += `<div class="detail-section">
                    <div class="detail-label">Come si fa</div>
                    <div class="detail-value">${exercise.come}</div>
                </div>`;
            }

            // Tecnica
            if (exercise.tecnica) {
                html += `<div class="detail-section">
                    <div class="detail-label">Tecnica</div>
                    <div class="detail-value">${exercise.tecnica}</div>
                </div>`;
            }

            // Note
            if (exercise.note) {
                html += `<div class="detail-section">
                    <div class="detail-label">Note</div>
                    <div class="detail-value">${exercise.note}</div>
                </div>`;
            }

            // Warning per fisioterapia
            if (exercise.fisio) {
                html += `<div class="warning-box">
                Fisioterapia
                </div>`;
            }

            body.innerHTML = html;
            modal.classList.add('visible');
        }

        function closeModal() {
            document.getElementById('exerciseModal').classList.remove('visible');
        }

        // Chiudi modale cliccando fuori
        document.getElementById('exerciseModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });

        // Timer Tabata
        let tabataInterval;
        let tabataTime;
        let tabataPhase = 'work'; // 'work' or 'rest'
        let tabataRound = 0;
        let tabataExerciseIndex = 0;
        let tabataPaused = false;
        const tabataExercises = ['V-up', 'Crunch', 'Biciclette', 'Plank'];
        const beepSound = new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBTGH0fPTgjMGHm7A7+OZSA0PVqzn77BdGAg+ltrzxnMpBSl+zPLaizsIGGS57OihUQ0MUKXi8bllHAU2j9n0z30sBS1+zPDajjwIF2u/7eScTgwOVKvl8LJfGwk7ldf0yHYpBSyAzvLaizgJGGe87OijTA0NUqbh8bllHAU2j9ny0H4tBS1/zPDajzwIGGu/7eScTgwOVKvl8LJfGwk7ldf0yHYpBSyBzvLaizcJGWe87OijTA0NUqfh8blmHAU2kNny0H4tBS2AzvDajzwIF2u/7eScTgwOVKvm8LJfGwk7ldf0yHYpBSyBzvLaizcJGWe87OijTA0NU6fi8blmHAU2kNny0H4tBS2AzvDajzwIF2vA7eSbTgwOVKvm8LJfGwk7ltf0yHYpBSyBzvLaizcJGWe87OijTA0NU6fi8blmHAU2kNny0H4tBS2AzvDajzwIF2vA7eSbTgwOVKzm8LJfGwk7ltf0yHYpBSyBzvLaizcJGWe87OijTA0NU6fi8blmHAU2kNny0H4tBS2AzvDajzwIF2vA7eSbTgwOVKzm8LJfGwk7ltf0yHYpBSyBzvLaizcJGWe87OijTA0NU6fi8blmHAU2kNny0H4tBS2AzvDajzwIF2vA7eSbTgwOVKzm8LJfGwk7ltf0yHYpBSyBzvLaizcJGWe87OijTA0NU6fi8blmHAU2kNny0H4tBS2AzvDajzwIF2vA7eSbTgwOVKzm8LJfGwk7ltf0yHYpBSyBzvLaizcJGWe87OijTA0NU6fi8blmHAU2kNny0H4tBS2AzvDajzwIF2vA7eSbTgwOVKzm8LJfGwk7ltf0yHYpBSyBzvLaizcJGWe87OijTA0NU6fi8blmHAU2kNny0H4tBS2AzvDajzwIF2vA7eSbTgwOVKzm8LJfGwk7ltf0yHYpBSyBzvLaizcJGWe87OijTA0NU6fi8blmHAU2kNny0H4tBS2AzvDajzwIF2vA7eSbTgwOVKzm8LJfGwk7ltf0yHYpBSyBzvLaizcJGWe87OijTA0NU6fi8bmHAg==');

        function startTabata() {
            tabataRound = 0;
            tabataExerciseIndex = 0;
            tabataPhase = 'work';
            tabataTime = 20;
            tabataPaused = false;

            document.getElementById('tabataTimer').classList.add('active');
            updateTabataUI();
            runTabata();
        }

        function runTabata() {
            if (!tabataPaused) {
                tabataInterval = setInterval(() => {
                    if (!tabataPaused) {
                        tabataTime--;
                        updateTabataUI();

                        if (tabataTime === 0) {
                            playBeep();
                            if (navigator.vibrate) navigator.vibrate(200);

                            if (tabataPhase === 'work') {
                                tabataPhase = 'rest';
                                tabataTime = 10;
                                tabataExerciseIndex++;
                                if (tabataExerciseIndex >= tabataExercises.length) {
                                    tabataExerciseIndex = 0;
                                }
                            } else {
                                tabataPhase = 'work';
                                tabataTime = 20;
                                tabataRound++;

                                if (tabataRound >= 8) {
                                    stopTabata();
                                    alert('Tabata completato! Grande lavoro!');
                                    return;
                                }
                            }
                            updateTabataUI();
                        }
                    }
                }, 1000);
            }
        }

        function updateTabataUI() {
            document.getElementById('timerNumber').textContent = tabataTime;
            document.getElementById('timerPhase').textContent = tabataPhase === 'work' ? 'LAVORO' : 'RIPOSO';
            document.getElementById('timerExercise').textContent = tabataExercises[tabataExerciseIndex];
            document.getElementById('timerRounds').textContent = `Round ${tabataRound + 1}/8`;

            const circle = document.getElementById('timerCircleProgress');
            const maxTime = tabataPhase === 'work' ? 20 : 10;
            const dashOffset = 817 - (817 * tabataTime / maxTime);
            circle.style.strokeDashoffset = dashOffset;

            if (tabataPhase === 'rest') {
                circle.classList.add('rest');
            } else {
                circle.classList.remove('rest');
            }
        }

        function toggleTabata() {
            tabataPaused = !tabataPaused;
            const btn = document.getElementById('timerPlayPause');
            btn.textContent = tabataPaused ? 'Riprendi' : 'Pausa';
        }

        function stopTabata() {
            clearInterval(tabataInterval);
            document.getElementById('tabataTimer').classList.remove('active');
        }

        function playBeep() {
            try {
                beepSound.play().catch(() => {});
            } catch (e) {}
        }

        // Recovery Timer
        let recoveryInterval;
        let recoverySeconds = 0;

        function startRecoveryTimer(seconds) {
            stopRecoveryTimer();
            recoverySeconds = seconds;

            const toast = document.getElementById('recoveryToast');
            toast.classList.add('active');
            updateRecoveryUI();

            recoveryInterval = setInterval(() => {
                recoverySeconds--;
                updateRecoveryUI();

                if (recoverySeconds <= 0) {
                    stopRecoveryTimer();
                    if (navigator.vibrate) navigator.vibrate([200, 100, 200]);
                }
            }, 1000);
        }

        function updateRecoveryUI() {
            const mins = Math.floor(recoverySeconds / 60);
            const secs = recoverySeconds % 60;
            document.getElementById('recoveryTime').textContent =
                `${mins}:${secs.toString().padStart(2, '0')}`;
        }

        function stopRecoveryTimer() {
            clearInterval(recoveryInterval);
            document.getElementById('recoveryToast').classList.remove('active');
        }

        // Workout Assistant - Gestione completa allenamento
        const workoutExercises = {
            workoutA: [
                { id: 'a-warm1', name: 'Bike/Tapirulan', key: 'bike', type: 'warmup', duration: 720 },
                { id: 'a-warm2', name: 'Circonduzione Braccia', key: 'circonduzione', type: 'warmup' },
                { id: 'a-warm3', name: 'Mobilità Spalle e Polsi', key: 'mobilita', type: 'warmup' },
                { id: 'a-fisio1', name: 'Heel Raises', key: 'heelraises', sets: 2, reps: 15, recovery: 60 },
                { id: 'a-fisio2', name: 'Box Bridge', key: 'boxbridge', sets: 3, reps: 10, recovery: 60 },
                { id: 'a-fisio3', name: 'Hip Thrust', key: 'hipthrust', sets: 3, reps: 12, recovery: 0, superset: true, supersetPair: 'ss1', supersetPartner: 'a-fisio4', supersetColor: '#FF6B35' },
                { id: 'a-fisio4', name: 'Side Walk', key: 'sidewalk', sets: 2, reps: 20, recovery: 60, superset: true, supersetPair: 'ss1', supersetPartner: 'a-fisio3', supersetColor: '#FF6B35' },
                { id: 'a-fisio5', name: 'Elvis', key: 'elvis', sets: 2, reps: 15, recovery: 60 },
                { id: 'a-push1', name: 'Panca Piana Manubri', key: 'pancapiana', sets: 4, reps: 8, recovery: 90 },
                { id: 'a-push2', name: 'Croci Panca Inclinata', key: 'croci', sets: 3, reps: 20, recovery: 120, superset: true, supersetPair: 'ss2', supersetColor: '#9B59B6' },
                { id: 'a-push3', name: 'Military Press', key: 'militarypress', sets: 4, reps: 10, recovery: 90 },
                { id: 'a-push4', name: 'Alzate Laterali', key: 'alzatelaterali', sets: 3, reps: 15, recovery: 60 },
                { id: 'a-push5', name: 'Push Down', key: 'pushdown', sets: 3, reps: 12, recovery: 60 },
                { id: 'a-push6', name: 'Dips', key: 'dips', sets: 3, reps: 12, recovery: 90 }
            ],
            workoutB: [
                { id: 'b-warm1', name: 'Bike/Tapirulan', key: 'bike', type: 'warmup', duration: 720 },
                { id: 'b-warm2', name: 'Cat-Cow', key: 'catcow', type: 'warmup' },
                { id: 'b-warm3', name: 'Dead Bug', key: 'deadbug', type: 'warmup' },
                { id: 'b-fisio1', name: 'Plank Estensione Gamba', key: 'plankestensione', sets: 3, reps: 10, recovery: 0, superset: true, supersetPair: 'ss3', supersetPartner: 'b-fisio2', supersetColor: '#3498DB' },
                { id: 'b-fisio2', name: 'L-Sit', key: 'lsit', sets: 3, reps: 30, recovery: 45, superset: true, supersetPair: 'ss3', supersetPartner: 'b-fisio1', supersetColor: '#3498DB' },
                { id: 'b-fisio3', name: 'Squat Tempo', key: 'squattempo', sets: 3, reps: 8, recovery: 0, superset: true, supersetPair: 'ss4', supersetPartner: 'b-fisio4', supersetColor: '#E74C3C' },
                { id: 'b-fisio4', name: 'Wall Sit', key: 'wallsit', sets: 3, reps: 45, recovery: 120, superset: true, supersetPair: 'ss4', supersetPartner: 'b-fisio3', supersetColor: '#E74C3C' },
                { id: 'b-fisio5', name: 'Affondo Camminato', key: 'affondo', sets: 3, reps: 12, recovery: 120 },
                { id: 'b-pull1', name: 'Trazioni', key: 'trazioni', sets: 4, reps: 8, recovery: 120 },
                { id: 'b-pull2', name: 'Pulley', key: 'pulley', sets: 3, reps: 12, recovery: 90 },
                { id: 'b-pull3', name: 'Curl Panca 45°', key: 'curlpanca', sets: 3, reps: 10, recovery: 60 },
                { id: 'b-pull4', name: 'Hammer Curl', key: 'hammercurl', sets: 3, reps: 12, recovery: 60 },
                { id: 'b-pull5', name: 'Curl Polsi', key: 'curlpolsi', sets: 3, reps: 15, recovery: 45 },
                { id: 'b-pull6', name: 'Reverse Curl', key: 'reversecurl', sets: 3, reps: 12, recovery: 45 },
                { id: 'b-pull7', name: 'Farmer Walk', key: 'farmerswalk', sets: 3, reps: 60, recovery: 90 }
            ],
            workoutC: [
                { id: 'c-cardio1', name: 'Bike/Tapirulan', key: 'bike', type: 'warmup', duration: 720 },
                { id: 'c-cardio2', name: 'Ellittica', key: 'ellittica', type: 'warmup' },
                { id: 'c-spalle1', name: 'Alzate Laterali Cavo', key: 'alzatecavo', sets: 3, reps: 15, recovery: 45 },
                { id: 'c-spalle2', name: 'Aperture 90°', key: 'aperture90', sets: 3, reps: 12, recovery: 45 },
                { id: 'c-spalle3', name: 'Farmer Walk', key: 'farmerswalk', sets: 2, reps: 60, recovery: 60 },
                { id: 'c-spalle4', name: 'Burpees', key: 'burpees', sets: 3, reps: 180, recovery: 60 },
                { id: 'c-core1', name: 'Russian Twist', key: 'russiantwist', sets: 3, reps: 30, recovery: 45 },
                { id: 'c-core2', name: 'Hollow Rock', key: 'hollowrock', sets: 3, reps: 20, recovery: 45 },
                { id: 'c-core3', name: 'Plank', key: 'plank', sets: 3, reps: 60, recovery: 45 }
            ]
        };

        let assistantState = {
            workoutId: null,
            exercises: [],
            currentExerciseIndex: 0,
            currentSet: 1,
            isRecovering: false,
            recoveryInterval: null,
            stopwatchInterval: null,
            stopwatchTime: 0,
            remainingTime: 0
        };

        // Workout Flow State Management
        let workoutFlowState = {
            workoutId: null,
            currentExerciseIndex: 0,
            currentSet: 1,
            timerSeconds: 0,
            timerInterval: null,
            timerRunning: false,
            timerMode: 'stopwatch', // 'stopwatch' or 'countdown'
            restSeconds: 90,
            totalRestSeconds: 90,
            restInterval: null,
            restRunning: false,
            isTransitionRest: false, // Flag to track if it's transition rest between exercises
            exercises: []
        };

        // Wake Lock for keeping screen on during workout
        let wakeLock = null;

        async function requestWakeLock() {
            try {
                if ('wakeLock' in navigator) {
                    wakeLock = await navigator.wakeLock.request('screen');
                    console.log('Screen Wake Lock attivo.');

                    wakeLock.addEventListener('release', () => {
                        console.log('Screen Wake Lock rilasciato.');
                    });
                }
            } catch (err) {
                console.log('Screen Wake Lock non supportato o negato:', err);
            }
        }

        function releaseWakeLock() {
            if (wakeLock) {
                wakeLock.release().then(() => {
                    wakeLock = null;
                    console.log('Screen Wake Lock rilasciato manualmente.');
                });
            }
        }

        // Workout Log for progressive overload tracking
        let workoutLog = JSON.parse(localStorage.getItem('workoutLog') || '[]');

        function saveSetData(exerciseId, exerciseName, setNumber, load, rpe) {
            const logEntry = {
                date: new Date().toISOString(),
                workoutId: workoutFlowState.workoutId,
                exerciseId: exerciseId,
                exerciseName: exerciseName,
                set: setNumber,
                load: load || null,
                rpe: rpe || null
            };

            workoutLog.push(logEntry);
            localStorage.setItem('workoutLog', JSON.stringify(workoutLog));
            console.log('Set salvato:', logEntry);
        }

        function getLastSetData(exerciseId) {
            // Find the most recent entry for this exercise
            const exerciseLogs = workoutLog.filter(log => log.exerciseId === exerciseId);
            if (exerciseLogs.length === 0) return null;

            // Return the most recent one
            return exerciseLogs[exerciseLogs.length - 1];
        }

        function startFullWorkout(workoutId) {
            // Initialize flow state
            workoutFlowState.workoutId = workoutId;
            workoutFlowState.exercises = workoutExercises[workoutId];
            workoutFlowState.currentExerciseIndex = 0;

            // Set title
            const titles = {
                workoutA: 'Allenamento 1',
                workoutB: 'Allenamento 2',
                workoutC: 'Allenamento 3'
            };
            document.getElementById('flowWorkoutTitle').textContent = titles[workoutId];

            // Show flow view
            document.getElementById('homeView').classList.add('hidden');
            document.getElementById('workoutFlowView').classList.add('visible');

            // Build sections for start state
            buildFlowSections('flowStartSections', workoutId);

            // Show start state
            setWorkoutFlowState('start');

            // Request Wake Lock to keep screen on
            requestWakeLock();
        }

        function setWorkoutFlowState(state) {
            const states = ['Start', 'Exercise', 'Rest'];
            states.forEach(s => {
                const el = document.getElementById('flowState' + s);
                if (s.toLowerCase() === state) {
                    el.classList.remove('hidden');
                } else {
                    el.classList.add('hidden');
                }
            });
        }

        function buildFlowSections(containerId, workoutId) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';

            // Get workout element to copy sections from
            const workoutEl = document.getElementById(workoutId);
            if (!workoutEl) return;

            const sections = workoutEl.querySelectorAll('.section');
            sections.forEach(section => {
                const clone = section.cloneNode(true);
                container.appendChild(clone);
            });

            // Update section counters after cloning
            updateSectionCounters(container);
        }

        function beginFirstExercise() {
            workoutFlowState.currentExerciseIndex = 0;
            startExerciseState();
        }

        function startExerciseState() {
            let exercise = workoutFlowState.exercises[workoutFlowState.currentExerciseIndex];
            if (!exercise) {
                console.error('No exercise found at index:', workoutFlowState.currentExerciseIndex);
                return;
            }

            // FIX: If starting a superset, ensure we begin with the first exercise (recovery: 0)
            if (exercise.superset && exercise.supersetPartner && exercise.recovery > 0) {
                // This is the second exercise of a superset, switch to the first one
                const partnerIndex = workoutFlowState.exercises.findIndex(ex => ex.id === exercise.supersetPartner);
                if (partnerIndex !== -1) {
                    const partner = workoutFlowState.exercises[partnerIndex];
                    if (partner.recovery === 0) {
                        console.log('Superset correction: switching from', exercise.name, 'to', partner.name);
                        workoutFlowState.currentExerciseIndex = partnerIndex;
                        exercise = partner; // Update reference to the correct exercise
                    }
                }
            }

            const exerciseInfo = exercise.key ? exerciseData[exercise.key] : null;

            // Update UI
            const category = getCategoryForExercise(exercise.id);
            const categoryElement = document.getElementById('flowExerciseCategory');
            categoryElement.textContent = category;

            // Apply superset color if applicable
            const supersetBadge = document.getElementById('flowSupersetBadge');
            if (exercise.superset === true) {
                categoryElement.style.display = 'none'; // Hide category badge for superset
                supersetBadge.classList.remove('hidden');
            } else {
                categoryElement.style.display = ''; // Show category badge
                categoryElement.style.backgroundColor = ''; // Reset to default
                supersetBadge.classList.add('hidden');
            }

            document.getElementById('flowExerciseName').textContent = exercise.name || 'Esercizio';

            // Update stats
            if (exercise.sets) {
                document.getElementById('flowSeriesInfo').textContent = `${workoutFlowState.currentSet}/${exercise.sets}`;
            } else {
                document.getElementById('flowSeriesInfo').textContent = '-';
            }

            if (exercise.reps) {
                document.getElementById('flowRepsInfo').textContent = exercise.reps;
            } else {
                document.getElementById('flowRepsInfo').textContent = '-';
            }

            // Display previous load/RPE data
            const previousDataElement = document.getElementById('flowPreviousData');
            const lastData = getLastSetData(exercise.id);
            if (lastData) {
                let displayText = 'Ultima volta: ';
                const parts = [];
                if (lastData.load) parts.push(`<strong>${lastData.load} Kg</strong>`);
                if (lastData.rpe) parts.push(`RPE <strong>${lastData.rpe}</strong>`);
                displayText += parts.join(' • ');
                previousDataElement.innerHTML = displayText;
                previousDataElement.classList.remove('hidden');
            } else {
                previousDataElement.classList.add('hidden');
            }

            // Update instructions and hide/show "Come eseguire" section for warmup/cardio exercises
            const howToSection = document.querySelector('.how-to-section');
            const howToContent = document.getElementById('flowHowToContent');

            // Hide "Come eseguire" for warmup/cardio exercises (those with type: 'warmup' or only duration, no sets)
            const isWarmupOrCardio = exercise.type === 'warmup' || (exercise.duration && !exercise.sets);

            if (isWarmupOrCardio) {
                howToSection.style.display = 'none';
            } else {
                howToSection.style.display = '';

                if (exerciseInfo) {
                    let html = '';

                    // Add image or video if available
                    if (exerciseInfo.image) {
                        html += `<img src="${exerciseInfo.image}" alt="${exerciseInfo.name}" class="exercise-image" />`;
                    } else if (exerciseInfo.video) {
                        const videoId = exerciseInfo.video.includes('youtube.com') || exerciseInfo.video.includes('youtu.be')
                            ? exerciseInfo.video.split('/').pop().split('?')[0].replace('watch?v=', '')
                            : '';
                        if (videoId) {
                            html += `<iframe class="exercise-video" src="https://www.youtube.com/embed/${videoId}" frameborder="0" allowfullscreen></iframe>`;
                        }
                    }

                    // Add text instructions
                    let instructions = exerciseInfo.come || '';
                    if (exerciseInfo.tecnica) {
                        instructions += '\n\nTecnica: ' + exerciseInfo.tecnica;
                    }
                    if (exerciseInfo.note) {
                        instructions += '\n\nNote: ' + exerciseInfo.note;
                    }
                    html += `<p id="flowExerciseInstructions">${instructions.replace(/\n/g, '<br>')}</p>`;

                    howToContent.innerHTML = html;
                } else {
                    howToContent.innerHTML = '<p id="flowExerciseInstructions">Nessuna istruzione disponibile.</p>';
                }
            }

            // Reset timer - check if exercise has duration (countdown) or not (stopwatch)
            if (exercise.duration) {
                workoutFlowState.timerSeconds = exercise.duration;
                workoutFlowState.timerMode = 'countdown';
            } else {
                workoutFlowState.timerSeconds = 0;
                workoutFlowState.timerMode = 'stopwatch';
            }
            updateExerciseTimerDisplay();

            // Start timer automatically
            startExerciseTimer();

            // Build sections
            buildFlowSections('flowExerciseSections', workoutFlowState.workoutId);

            // Show exercise state
            setWorkoutFlowState('exercise');
        }

        function getCategoryForExercise(exerciseId) {
            if (exerciseId.includes('warm')) return 'Riscaldamento';
            if (exerciseId.includes('fisio')) return 'Fisioterapia';
            if (exerciseId.includes('push')) return 'Push Exercises';
            if (exerciseId.includes('pull')) return 'Pull Exercises';
            if (exerciseId.includes('core')) return 'Core';
            if (exerciseId.includes('spalle')) return 'Spalle';
            if (exerciseId.includes('cardio')) return 'Cardio';
            return 'Esercizio';
        }

        function startExerciseTimer() {
            if (workoutFlowState.timerRunning) return;

            workoutFlowState.timerRunning = true;
            workoutFlowState.timerInterval = setInterval(() => {
                if (workoutFlowState.timerMode === 'countdown') {
                    workoutFlowState.timerSeconds--;
                    if (workoutFlowState.timerSeconds <= 0) {
                        workoutFlowState.timerSeconds = 0;
                        stopExerciseTimer();
                        // Auto complete when countdown reaches 0
                        if (navigator.vibrate) navigator.vibrate([200, 100, 200]);
                    }
                } else {
                    workoutFlowState.timerSeconds++;
                }
                updateExerciseTimerDisplay();
            }, 1000);

            // Update UI
            document.getElementById('flowTimerPlayIcon').classList.add('hidden');
            document.getElementById('flowTimerPauseIcon').classList.remove('hidden');
        }

        function stopExerciseTimer() {
            workoutFlowState.timerRunning = false;
            if (workoutFlowState.timerInterval) {
                clearInterval(workoutFlowState.timerInterval);
                workoutFlowState.timerInterval = null;
            }

            // Update UI
            document.getElementById('flowTimerPlayIcon').classList.remove('hidden');
            document.getElementById('flowTimerPauseIcon').classList.add('hidden');
        }

        function toggleExerciseTimer() {
            if (workoutFlowState.timerRunning) {
                stopExerciseTimer();
            } else {
                startExerciseTimer();
            }
        }

        function resetExerciseTimer() {
            stopExerciseTimer();
            const exercise = workoutFlowState.exercises[workoutFlowState.currentExerciseIndex];
            if (exercise && exercise.duration) {
                workoutFlowState.timerSeconds = exercise.duration;
            } else {
                workoutFlowState.timerSeconds = 0;
            }
            updateExerciseTimerDisplay();
        }

        function updateExerciseTimerDisplay() {
            const mins = Math.floor(workoutFlowState.timerSeconds / 60);
            const secs = workoutFlowState.timerSeconds % 60;
            document.getElementById('flowTimer').textContent =
                `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        function toggleHowTo() {
            const header = document.querySelector('.how-to-header');
            const content = document.getElementById('flowHowToContent');
            header.classList.toggle('expanded');
            content.classList.toggle('expanded');
        }

        function completeCurrentExercise() {
            console.log('completeCurrentExercise called');
            stopExerciseTimer();

            const exercise = workoutFlowState.exercises[workoutFlowState.currentExerciseIndex];
            if (!exercise) {
                console.error('No exercise found at index:', workoutFlowState.currentExerciseIndex);
                return;
            }

            console.log('Exercise:', exercise.name, 'Sets:', exercise.sets, 'CurrentSet:', workoutFlowState.currentSet);

            // Check if this is a superset exercise
            if (exercise.superset && exercise.supersetPartner) {
                // Find the partner exercise
                const partnerIndex = workoutFlowState.exercises.findIndex(ex => ex.id === exercise.supersetPartner);
                const partner = workoutFlowState.exercises[partnerIndex];

                // Determine if we just completed the first or second exercise in the pair
                const isFirstInPair = exercise.recovery === 0;

                if (isFirstInPair) {
                    // Just completed first exercise (A), go immediately to second (B)
                    console.log('Superset: moving from', exercise.name, 'to', partner.name);
                    workoutFlowState.currentExerciseIndex = partnerIndex;
                    workoutFlowState.currentSet = workoutFlowState.currentSet; // Keep same set number
                    startExerciseState();
                } else {
                    // Just completed second exercise (B), check if more sets needed
                    if (workoutFlowState.currentSet < exercise.sets) {
                        // More sets to do, take rest then go back to first exercise (A)
                        console.log('Superset: completing set', workoutFlowState.currentSet, ', starting rest');
                        workoutFlowState.currentSet++;
                        workoutFlowState.currentExerciseIndex = partnerIndex; // Set to go back to first exercise after rest
                        startRestState(exercise.recovery);
                    } else {
                        // All sets complete for this superset
                        console.log('Superset complete, marking exercises as done');
                        markExerciseComplete(exercise.id);
                        markExerciseComplete(partner.id);

                        // Find the next exercise after both superset exercises
                        const nextIndex = Math.max(
                            workoutFlowState.exercises.findIndex(ex => ex.id === exercise.id),
                            workoutFlowState.exercises.findIndex(ex => ex.id === partner.id)
                        ) + 1;

                        workoutFlowState.currentExerciseIndex = nextIndex;
                        workoutFlowState.currentSet = 1;

                        if (nextIndex >= workoutFlowState.exercises.length) {
                            // Workout complete
                            exitWorkoutFlow();
                            alert('Allenamento completato! Ottimo lavoro!');
                        } else {
                            startTransitionRest();
                        }
                    }
                }
            } else {
                // Regular exercise (not superset)
                if (exercise.recovery && exercise.sets && workoutFlowState.currentSet < exercise.sets) {
                    // Go to rest state
                    console.log('Going to rest - has recovery');
                    workoutFlowState.currentSet++;
                    startRestState(exercise.recovery);
                } else if (exercise.sets && workoutFlowState.currentSet < exercise.sets) {
                    // More sets but no recovery specified
                    console.log('Going to rest - default recovery');
                    workoutFlowState.currentSet++;
                    startRestState(90); // Default 90 seconds
                } else {
                    // Exercise complete, mark checkbox and add transition rest before next exercise
                    console.log('Exercise complete, starting transition rest');
                    markExerciseComplete(exercise.id);
                    startTransitionRest();
                }
            }
        }

        function markExerciseComplete(exerciseId) {
            console.log('markExerciseComplete called for:', exerciseId);

            // Mark all checkboxes with this ID (original + clones)
            const checkboxes = document.querySelectorAll(`#${exerciseId}`);
            console.log('Found checkboxes:', checkboxes.length);

            if (checkboxes.length > 0) {
                checkboxes.forEach(checkbox => {
                    if (!checkbox.classList.contains('checked')) {
                        checkbox.classList.add('checked');
                        console.log('Checkbox marked as checked');
                    }
                });
                saveProgress();
                updateProgress();
            } else {
                console.error('No checkboxes found for ID:', exerciseId);
            }

            // Also update all cloned checkboxes in the flow sections
            updateFlowSectionsCheckbox(exerciseId);
        }

        function updateFlowSectionsCheckbox(exerciseId) {
            // Update checkboxes in all flow section containers
            const containers = ['flowStartSections', 'flowExerciseSections', 'flowRestSections'];
            containers.forEach(containerId => {
                const container = document.getElementById(containerId);
                if (container) {
                    const checkboxes = container.querySelectorAll(`[id="${exerciseId}"]`);
                    checkboxes.forEach(cb => {
                        cb.classList.add('checked');
                    });
                    // Update section counters
                    updateSectionCounters(container);
                }
            });
        }

        function updateSectionCounters(container) {
            const sections = container.querySelectorAll('.section');
            sections.forEach(section => {
                const checkboxes = section.querySelectorAll('.checkbox');
                const checked = section.querySelectorAll('.checkbox.checked').length;
                const total = checkboxes.length;
                const counter = section.querySelector('.section-counter');
                if (counter && total > 0) {
                    counter.textContent = `(${checked}/${total})`;
                }
            });
        }

        function startRestState(restTime) {
            workoutFlowState.restSeconds = restTime || 90;
            workoutFlowState.totalRestSeconds = workoutFlowState.restSeconds;
            workoutFlowState.isTransitionRest = false; // This is a regular rest between sets

            updateRestTimerDisplay();
            updateRestCircle(1); // Start at 100%

            // Hide/show log inputs based on exercise type
            const exercise = workoutFlowState.exercises[workoutFlowState.currentExerciseIndex];
            const logInputsSection = document.getElementById('rest-log-inputs');

            // Hide log inputs for warmup/cardio exercises (those with type: 'warmup' or only duration, no sets)
            const isWarmupOrCardio = exercise && (exercise.type === 'warmup' || (exercise.duration && !exercise.sets));

            if (isWarmupOrCardio) {
                logInputsSection.style.display = 'none';
            } else {
                logInputsSection.style.display = '';
            }

            // Build sections
            buildFlowSections('flowRestSections', workoutFlowState.workoutId);

            // Show rest state
            setWorkoutFlowState('rest');

            // Start rest timer
            startRestTimer();
        }

        function startRestTimer() {
            if (workoutFlowState.restRunning) return;

            workoutFlowState.restRunning = true;

            workoutFlowState.restInterval = setInterval(() => {
                workoutFlowState.restSeconds--;
                updateRestTimerDisplay();

                const progress = workoutFlowState.restSeconds / workoutFlowState.totalRestSeconds;
                updateRestCircle(progress);

                if (workoutFlowState.restSeconds <= 0) {
                    stopRestTimer();
                    // Auto advance with logging opportunity
                    logAndMoveToNextSet();
                }
            }, 1000);

            // Update UI
            document.getElementById('flowRestPauseIcon').classList.remove('hidden');
            document.getElementById('flowRestPlayIcon').classList.add('hidden');
        }

        function stopRestTimer() {
            workoutFlowState.restRunning = false;
            if (workoutFlowState.restInterval) {
                clearInterval(workoutFlowState.restInterval);
                workoutFlowState.restInterval = null;
            }

            // Update UI
            document.getElementById('flowRestPauseIcon').classList.add('hidden');
            document.getElementById('flowRestPlayIcon').classList.remove('hidden');
        }

        function toggleRestTimer() {
            if (workoutFlowState.restRunning) {
                stopRestTimer();
            } else {
                startRestTimer();
            }
        }

        function updateRestTimerDisplay() {
            const mins = Math.floor(workoutFlowState.restSeconds / 60);
            const secs = workoutFlowState.restSeconds % 60;
            document.getElementById('flowRestTimer').textContent =
                `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        function updateRestCircle(progress) {
            const circle = document.getElementById('flowRestCircle');
            const radius = 136;
            const circumference = 2 * Math.PI * radius;

            circle.style.strokeDasharray = circumference;
            const offset = circumference * (1 - progress);
            circle.style.strokeDashoffset = offset;
        }

        function skipRest() {
            stopRestTimer();
            startExerciseState();
        }

        function logAndMoveToNextSet() {
            // Get the current exercise
            const exercise = workoutFlowState.exercises[workoutFlowState.currentExerciseIndex];
            if (!exercise) {
                console.error('No exercise found');
                return;
            }

            // Get load and RPE values from inputs (only for regular rest, not transition)
            if (!workoutFlowState.isTransitionRest) {
                const loadInput = document.getElementById('load-during-rest');
                const rpeInput = document.getElementById('rpe-during-rest');
                const load = loadInput.value ? parseFloat(loadInput.value) : null;
                const rpe = rpeInput.value ? parseFloat(rpeInput.value) : null;

                // Save the set data if at least one value was entered
                if (load !== null || rpe !== null) {
                    saveSetData(
                        exercise.id,
                        exercise.name,
                        workoutFlowState.currentSet - 1, // We already incremented in completeCurrentExercise
                        load,
                        rpe
                    );
                }

                // Clear the input fields
                loadInput.value = '';
                rpeInput.value = '';
            }

            // Provide feedback (vibration + audio)
            if (navigator.vibrate) {
                navigator.vibrate([200]);
            }

            // Play a simple beep sound using Web Audio API
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                oscillator.frequency.value = 800;
                oscillator.type = 'sine';

                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);

                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.2);
            } catch (err) {
                console.log('Audio feedback non disponibile:', err);
            }

            // Stop the rest timer
            stopRestTimer();

            // Move to next set or next exercise depending on the rest type
            if (workoutFlowState.isTransitionRest) {
                // This was a transition rest, move to the next exercise
                moveToNextExercise();
            } else {
                // This was a regular rest between sets, start the next set
                startExerciseState();
            }
        }

        function startTransitionRest() {
            console.log('Starting transition rest between exercises');

            // Set transition rest time (60 seconds default for equipment change)
            workoutFlowState.restSeconds = 60;
            workoutFlowState.totalRestSeconds = workoutFlowState.restSeconds;
            workoutFlowState.isTransitionRest = true; // Mark this as transition rest

            updateRestTimerDisplay();
            updateRestCircle(1); // Start at 100%

            // Build sections
            buildFlowSections('flowRestSections', workoutFlowState.workoutId);

            // Show rest state
            setWorkoutFlowState('rest');

            // Start transition rest timer
            startTransitionRestTimer();
        }

        function startTransitionRestTimer() {
            if (workoutFlowState.restRunning) return;

            workoutFlowState.restRunning = true;

            workoutFlowState.restInterval = setInterval(() => {
                workoutFlowState.restSeconds--;
                updateRestTimerDisplay();

                const progress = workoutFlowState.restSeconds / workoutFlowState.totalRestSeconds;
                updateRestCircle(progress);

                if (workoutFlowState.restSeconds <= 0) {
                    stopRestTimer();
                    // Move to next exercise after transition rest
                    moveToNextExercise();
                }
            }, 1000);

            // Update UI
            document.getElementById('flowRestPauseIcon').classList.remove('hidden');
            document.getElementById('flowRestPlayIcon').classList.add('hidden');
        }

        function skipTransitionRest() {
            stopRestTimer();
            moveToNextExercise();
        }

        function moveToNextExercise() {
            console.log('moveToNextExercise called, current index:', workoutFlowState.currentExerciseIndex);
            workoutFlowState.currentExerciseIndex++;
            workoutFlowState.currentSet = 1;

            console.log('New index:', workoutFlowState.currentExerciseIndex, 'Total exercises:', workoutFlowState.exercises.length);

            if (workoutFlowState.currentExerciseIndex >= workoutFlowState.exercises.length) {
                // Workout complete
                console.log('Workout complete!');
                exitWorkoutFlow();
                alert('Allenamento completato! Ottimo lavoro!');
            } else {
                console.log('Starting next exercise');
                startExerciseState();
            }
        }

        function exitWorkoutFlow() {
            // Stop all timers
            stopExerciseTimer();
            stopRestTimer();

            // Release Wake Lock
            releaseWakeLock();

            // Reset state
            workoutFlowState = {
                workoutId: null,
                currentExerciseIndex: 0,
                currentSet: 1,
                timerSeconds: 0,
                timerInterval: null,
                timerRunning: false,
                timerMode: 'stopwatch',
                restSeconds: 90,
                totalRestSeconds: 90,
                restInterval: null,
                restRunning: false,
                isTransitionRest: false,
                exercises: []
            };

            // Hide flow view
            document.getElementById('workoutFlowView').classList.remove('visible');

            // Show home view
            document.getElementById('homeView').classList.remove('hidden');
        }

        // Keep old assistant code for compatibility
        function startFullWorkoutOld(workoutId) {
            assistantState = {
                workoutId: workoutId,
                exercises: workoutExercises[workoutId],
                currentExerciseIndex: 0,
                currentSet: 1,
                isRecovering: false,
                recoveryInterval: null,
                stopwatchInterval: null,
                stopwatchTime: 0,
                remainingTime: 0
            };

            document.getElementById('workoutAssistant').classList.add('active');
            startCurrentExercise();
        }

        function startCurrentExercise() {
            assistantState.currentSet = 1;
            assistantState.stopwatchTime = 0;
            assistantState.isRecovering = false;

            // Avvia cronometro
            assistantState.stopwatchInterval = setInterval(() => {
                assistantState.stopwatchTime++;
                updateStopwatchDisplay();
            }, 1000);

            updateAssistantUI();
        }

        function updateAssistantUI() {
            const exercise = assistantState.exercises[assistantState.currentExerciseIndex];
            const exerciseInfo = exerciseData[exercise.key];

            document.getElementById('assistantExerciseName').textContent = exercise.name;

            const statusTag = document.getElementById('assistantStatusTag');
            if (assistantState.isRecovering) {
                statusTag.textContent = 'RECUPERO';
                statusTag.classList.add('recovery');
            } else {
                statusTag.textContent = 'IN PROGRESS';
                statusTag.classList.remove('recovery');
            }

            if (exercise.type === 'warmup') {
                document.getElementById('assistantSetsToDo').textContent = 'Riscaldamento';
                document.getElementById('assistantSetsProgress').textContent = '';
            } else {
                document.getElementById('assistantSetsToDo').textContent = `Ripetizioni: ${exercise.reps}`;
                document.getElementById('assistantSetsProgress').textContent = `Serie ${assistantState.currentSet}/${exercise.sets}`;
            }

            const stopwatchEl = document.getElementById('assistantStopwatch');
            const timerEl = document.getElementById('assistantTimer');

            if (assistantState.isRecovering) {
                stopwatchEl.classList.add('hidden');
                timerEl.classList.add('active');
                const mins = Math.floor(assistantState.remainingTime / 60);
                const secs = assistantState.remainingTime % 60;
                document.getElementById('assistantTimerDisplay').textContent =
                    `${mins}:${secs.toString().padStart(2, '0')}`;
            } else {
                stopwatchEl.classList.remove('hidden');
                timerEl.classList.remove('active');
            }

            const instructionsEl = document.getElementById('assistantInstructions');
            const instructionsText = document.getElementById('assistantInstructionsText');

            if (exerciseInfo && exerciseInfo.come) {
                instructionsEl.classList.remove('hidden');
                let instructions = `${exerciseInfo.come}`;
                if (exerciseInfo.tecnica) {
                    instructions += `\n\nTecnica: ${exerciseInfo.tecnica}`;
                }
                if (exerciseInfo.note) {
                    instructions += `\n\nNote: ${exerciseInfo.note}`;
                }
                instructionsText.textContent = instructions;
            } else {
                instructionsEl.classList.add('hidden');
            }

            const actionBtn = document.getElementById('assistantActionBtn');
            if (assistantState.isRecovering) {
                actionBtn.textContent = 'Salta Recupero';
            } else if (exercise.type === 'warmup') {
                actionBtn.textContent = 'Completato - Prossimo';
            } else if (assistantState.currentSet < exercise.sets) {
                actionBtn.textContent = 'Serie Completata - Recupero';
            } else {
                actionBtn.textContent = 'Esercizio Completo - Prossimo';
            }
        }

        function updateStopwatchDisplay() {
            const mins = Math.floor(assistantState.stopwatchTime / 60);
            const secs = assistantState.stopwatchTime % 60;
            document.getElementById('assistantStopwatchDisplay').textContent =
                `${mins}:${secs.toString().padStart(2, '0')}`;
        }

        function workoutAssistantAction() {
            const exercise = assistantState.exercises[assistantState.currentExerciseIndex];

            if (assistantState.isRecovering) {
                stopAssistantRecovery();
                assistantState.currentSet++;
                if (assistantState.currentSet > exercise.sets) {
                    moveToNextExerciseOld();
                } else {
                    assistantState.stopwatchTime = 0;
                    assistantState.stopwatchInterval = setInterval(() => {
                        assistantState.stopwatchTime++;
                        updateStopwatchDisplay();
                    }, 1000);
                    updateAssistantUI();
                }
            } else {
                stopStopwatch();

                if (exercise.type === 'warmup') {
                    moveToNextExerciseOld();
                } else if (assistantState.currentSet < exercise.sets) {
                    startAssistantRecovery(exercise.recovery);
                } else {
                    moveToNextExerciseOld();
                }
            }
        }

        function startAssistantRecovery(seconds) {
            assistantState.isRecovering = true;
            assistantState.remainingTime = seconds;
            updateAssistantUI();

            assistantState.recoveryInterval = setInterval(() => {
                assistantState.remainingTime--;
                updateAssistantUI();

                if (assistantState.remainingTime <= 0) {
                    stopAssistantRecovery();
                    assistantState.currentSet++;
                    const exercise = assistantState.exercises[assistantState.currentExerciseIndex];

                    if (assistantState.currentSet > exercise.sets) {
                        moveToNextExerciseOld();
                    } else {
                        assistantState.stopwatchTime = 0;
                        assistantState.stopwatchInterval = setInterval(() => {
                            assistantState.stopwatchTime++;
                            updateStopwatchDisplay();
                        }, 1000);
                        updateAssistantUI();
                    }

                    if (navigator.vibrate) navigator.vibrate([200, 100, 200]);
                }
            }, 1000);
        }

        function stopAssistantRecovery() {
            clearInterval(assistantState.recoveryInterval);
            assistantState.isRecovering = false;
        }

        function stopStopwatch() {
            clearInterval(assistantState.stopwatchInterval);
        }

        function moveToNextExerciseOld() {
            const currentExercise = assistantState.exercises[assistantState.currentExerciseIndex];
            toggleCheck(currentExercise.id);

            assistantState.currentExerciseIndex++;

            if (assistantState.currentExerciseIndex >= assistantState.exercises.length) {
                stopStopwatch();
                document.getElementById('workoutAssistant').classList.remove('active');
                alert('Allenamento completato! Ottimo lavoro!');
                updateProgress();
            } else {
                startCurrentExercise();
            }
        }

        function closeWorkoutAssistant() {
            stopAssistantRecovery();
            stopStopwatch();
            document.getElementById('workoutAssistant').classList.remove('active');
        }

        // Calendario - Evidenzia giorno di oggi
        function updateCalendar() {
            const today = new Date().getDay(); // 0 = Dom, 1 = Lun, ...
            document.querySelectorAll('.calendar-day').forEach(day => {
                const dayNum = parseInt(day.dataset.day);
                if (dayNum === today) {
                    day.classList.add('today');
                }
            });
        }

        // Navigation
        function switchView(view) {
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));

            if (view === 'home') {
                document.getElementById('homeView').classList.remove('hidden');
                document.getElementById('historyView').classList.remove('visible');
                document.querySelectorAll('.workout-detail').forEach(w => w.classList.remove('visible'));
                document.querySelectorAll('.nav-btn')[0].classList.add('active');
            } else if (view === 'history') {
                document.getElementById('homeView').classList.add('hidden');
                document.getElementById('historyView').classList.add('visible');
                document.querySelectorAll('.workout-detail').forEach(w => w.classList.remove('visible'));
                document.querySelectorAll('.nav-btn')[1].classList.add('active');
                loadHistory();
            }
            window.scrollTo(0, 0);
        }

        // History
        function loadHistory() {
            const history = JSON.parse(localStorage.getItem('workoutHistory') || '[]');
            const container = document.getElementById('historyList');

            if (history.length === 0) {
                container.innerHTML = '<div style="text-align:center;color:var(--color-text-dim);padding:40px;">Nessun allenamento completato ancora</div>';
                return;
            }

            container.innerHTML = history.map(item => `
                <div class="history-item">
                    <div class="history-date">${item.date}</div>
                    <div class="history-workout">${item.workout}</div>
                    <div style="font-size:14px;color:var(--color-text-dim);">Esercizi: ${item.completed}/${item.total}</div>
                </div>
            `).reverse().join('');
        }

        function saveWorkoutSession(workoutName, completed, total) {
            const history = JSON.parse(localStorage.getItem('workoutHistory') || '[]');
            const date = new Date().toLocaleDateString('it-IT');

            history.push({
                date,
                workout: workoutName,
                completed,
                total,
                timestamp: Date.now()
            });

            localStorage.setItem('workoutHistory', JSON.stringify(history));
        }

        // Inizializza tutte le checkbox con SVG inline
        function initCheckboxes() {
            const uncheckedSVG = '<svg class="svg-unchecked" width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="1" y="0.5" width="15" height="15" rx="7.5" stroke="#D0D5DD"/></svg>';
            const checkedSVG = '<svg class="svg-checked" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0ZM11.9229 4.91113C11.5974 4.5857 11.0696 4.5857 10.7441 4.91113L6.75 8.9043L5.25586 7.41113C4.93042 7.0857 4.40356 7.0857 4.07812 7.41113C3.75269 7.73657 3.75269 8.26343 4.07812 8.58887L6.16113 10.6729C6.31731 10.8289 6.52921 10.9169 6.75 10.917C6.97099 10.917 7.18358 10.8291 7.33984 10.6729L11.9229 6.08887C12.2481 5.76349 12.248 5.23653 11.9229 4.91113Z" fill="#00875F"/></svg>';

            document.querySelectorAll('.checkbox').forEach(checkbox => {
                if (!checkbox.querySelector('svg')) {
                    checkbox.innerHTML = uncheckedSVG + checkedSVG;
                }
            });
        }

        // Init
        document.addEventListener('DOMContentLoaded', function() {
            initCheckboxes();
            loadProgress();
            updateCalendar();

            // Tutte le sezioni iniziano chiuse
        });

        // PWA - Installazione
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
        });
    </script>
</body>
</html>
